(this["webpackJsonpnyc-carbon"]=this["webpackJsonpnyc-carbon"]||[]).push([[0],{100:function(e,t,a){},101:function(e,t,a){},102:function(e,t,a){},103:function(e,t,a){},104:function(e,t,a){},105:function(e,t,a){},106:function(e,t,a){},107:function(e,t,a){},108:function(e,t,a){},109:function(e,t,a){},110:function(e,t,a){},111:function(e,t,a){e.exports=a.p+"static/media/CircularStd-Black.7f42d848.otf"},112:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"setDimensions",(function(){return m})),a.d(n,"setIsDemoMode",(function(){return f})),a.d(n,"setIsLoadMode",(function(){return p})),a.d(n,"setLoadBldgModalActive",(function(){return y})),a.d(n,"setUtilityRateModalActive",(function(){return _})),a.d(n,"setLoadConfirmDialogActive",(function(){return v})),a.d(n,"setInfoModalActive",(function(){return b})),a.d(n,"setBuilding",(function(){return h})),a.d(n,"setDefaultBuilding",(function(){return g})),a.d(n,"setDemoBuilding",(function(){return E})),a.d(n,"setIsSmallScreen",(function(){return A})),a.d(n,"setLoadTableData",(function(){return O})),a.d(n,"setLoadInputValue",(function(){return j})),a.d(n,"setLoadInputResponse",(function(){return w})),a.d(n,"setLoadInputSelection",(function(){return S})),a.d(n,"setIsLoadedError",(function(){return I})),a.d(n,"setIsDefaultRates",(function(){return L})),a.d(n,"useDefaultRates",(function(){return N})),a.d(n,"useNullRates",(function(){return x}));var r=a(0),i=a.n(r),l=a(16),o=a.n(l),c=a(124),s=a(3),u=a(18),d=a(4);function m(e){return{type:"SET_DIMENSIONS",payload:e}}function f(e){return{type:"SET_IS_DEMO_MODE",payload:e}}function p(e){return{type:"SET_IS_LOAD_MODE",payload:e}}function y(e){return{type:"SET_LOAD_MODAL_ACTIVE",payload:e}}function _(e){return{type:"SET_UTILITY_RATE_MODAL_ACTIVE",payload:e}}function v(e){return{type:"SET_LOAD_CONFIRM_DIALOG_ACTIVE",payload:e}}function b(e){return{type:"SET_INFO_MODAL_ACTIVE",payload:e}}function h(e){return{type:"SET_BUILDING",payload:e}}function g(){return{type:"SET_DEFAULT_BUILDING"}}function E(){return{type:"SET_DEMO_BUILDING"}}function A(e){return{type:"SET_IS_SMALL_SCREEN",payload:e}}function O(e){return{type:"SET_LOAD_TABLE_DATA",payload:e}}function j(e){return{type:"SET_LOAD_INPUT_VALUE",payload:e}}function w(e){return{type:"SET_LOAD_INPUT_RESPONSE",payload:e}}function S(e){return{type:"SET_LOAD_INPUT_SELECTION",payload:e}}function I(e){return{type:"SET_IS_LOADED_ERROR",payload:e}}function L(e){return{type:"SET_IS_DEFAULT_RATES",payload:e}}function N(){return{type:"USE_DEFAULT_RATES"}}function x(){return{type:"USE_NULL_RATES"}}var T=function(e){return{actions:Object(d.b)(n,e)}},B=function(e){return{data:Object(s.a)({},e)}},C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:T;return Object(u.b)(e,t)},k=a(10),D=C((function(e,t){var a=t.utiltag;return{vals:e.building.inputs.utilities[a],inputs:e.building.inputs}}))((function(e){var t=e.title,a=e.cons_title,n=e.cost_title,l=e.utiltag,o=e.inputs,c=e.vals,s=Object(r.useRef)(null),u=Object(r.useRef)(null);return i.a.createElement("div",{className:"".concat(l,"-container utility-input-container")},i.a.createElement("div",{className:"consumption-container"},i.a.createElement("div",{className:"head-text-4"},"".concat(t," - ").concat(a)),i.a.createElement(k.a,{ref:s,displayType:"input",datatag:l,onValueChange:function(t){var a=t.floatValue,n=s.current.props.datatag,r=Object.assign({},o);r.utilities[n].cons=a||0,e.actions.setBuilding(r)},thousandSeparator:!0,value:c.cons})),i.a.createElement("div",{className:"cost-container"},i.a.createElement("div",{className:"head-text-4"},n),i.a.createElement(k.a,{ref:u,displayType:"input",datatag:l,onValueChange:function(t){var a=t.floatValue,n=u.current.props.datatag,r=Object.assign({},o);r.utilities[n].rate=a||0,e.actions.setBuilding(r)},value:c.rate})))})),R=Object(c.a)({root:{},defaultRateText:{cursor:"pointer",color:"blue"}}),M=C((function(e){return{inputs:e.building.inputs,isDefaultRates:e.building.isDefaultRates}}))((function(e){var t=e.isDefaultRates,a=R();return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"default-rate-checkbox head-text-4"},i.a.createElement("input",{type:"checkbox",checked:t,onChange:function(){t?(e.actions.setIsDefaultRates(!1),e.actions.useNullRates()):(e.actions.setIsDefaultRates(!0),e.actions.useDefaultRates())}}),i.a.createElement("div",{className:"head-text-4"},i.a.createElement("span",null,"Use Default Rates"),i.a.createElement("span",{onClick:function(){e.actions.setUtilityRateModalActive(!0)},className:a.defaultRateText}," ",i.a.createElement("u",null,"?")))),i.a.createElement("div",{className:"utility-input-main-container"},i.a.createElement(D,{title:"Electricity",cons_title:"kWh",utiltag:"elec",cost_title:"$/kWh"}),i.a.createElement(D,{title:"Natural Gas",cons_title:"therms",utiltag:"gas",cost_title:"$/therm"}),i.a.createElement(D,{title:"Steam",cons_title:"mLbs",utiltag:"steam",cost_title:"$/mLb"}),i.a.createElement(D,{title:"Fuel Oil 2",cons_title:"gal",utiltag:"fuel_two",cost_title:"$/gal"}),i.a.createElement(D,{title:"Fuel Oil 4",cons_title:"gal",utiltag:"fuel_four",cost_title:"$/gal"})))})),F=C((function(e){return{inputs:e.building.inputs}}))((function(e){var t=e.typenum,a=e.bldgtype,n=e.area,l=e.inputs,o=Object(r.useRef)(null),c={A:"A (Assembly)",B_norm:"B (Business)",B_health:"B (Healthcare)",E:"E (Educational)",F:"F (Factory/Industrial)",H:"H (High Hazard)",I1:"I-1 (Institutional)",I2:"I-2 (Institutional)",I3:"I-3 (Institutional)",I4:"I-4 (Institutional)",M:"M (Mercantile)",R1:"R-1 (Residential)",R2:"R-2 (Residential)",S:"S (Storage)",U:"U (Utility/Misc)"};return i.a.createElement("div",{className:"bldg-input-container"},i.a.createElement("div",{className:"type-controls-container"},i.a.createElement("div",{className:"type-label"},"".concat(t)),i.a.createElement("div",{className:"type-container"},i.a.createElement("select",{className:"bldg-type-select",datatag:t,onChange:function(t){var a=Object.assign({},l),n=t.target.value,r=t.target.getAttribute("datatag");a.types[r].type=n,e.actions.setBuilding(a)},value:a},Object.keys(c).map((function(e){return i.a.createElement("option",{value:e,key:e+"-option"},c[e])})))),i.a.createElement("div",{className:"area-container"},i.a.createElement(k.a,{ref:o,datatag:t,onValueChange:function(t){var a=t.floatValue,n=Object.assign({},l),r=o.current.props.datatag;n.types[r].area=a||0,e.actions.setBuilding(n)},thousandSeparator:!0,value:n}),i.a.createElement("button",{className:"type-remove-btn",dataremove:t,onClick:function(t){var a=t.target.getAttribute("dataremove"),n=Object.assign({},l);delete n.types[a],e.actions.setBuilding(n)}},"X"))),i.a.createElement("div",{className:"bldg-input-border"}))})),U=C((function(e){return{inputs:e.building.inputs}}))((function(e){var t=e.inputs;return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"input-header-type head-text-4"},"Building Type",i.a.createElement("a",{href:"https://up.codes/viewer/new_york_city/nyc-building-code-2014/chapter/3/use-and-occupancy-classification#3",target:"_blank",rel:"noopener noreferrer"},i.a.createElement("span",{style:{marginLeft:"5px",paddingTop:"5px"}},"?"))),i.a.createElement("div",{className:"input-header-area head-text-4"},"Area (SF)"),Object.keys(t.types).map((function(e){var a=t.types[e],n=a.type,r=a.area;return i.a.createElement(i.a.Fragment,{key:e},i.a.createElement(F,{bldgtype:n,area:r,typenum:e}))})),i.a.createElement("div",{className:"add-building-type"},i.a.createElement("button",{onClick:function(){for(var a=Object.assign({},t),n=Object.keys(a.types).length+1;n in a.types;)n++;a.types[n]={type:"A",area:0,id:n},e.actions.setBuilding(a)}},"+"),i.a.createElement("div",null,"Add Building Type")))})),P=function(e){return i.a.createElement("div",{className:"sidebar"},i.a.createElement("div",{className:"sidebar-main-container"},i.a.createElement("div",{className:"head-text-2"},"Building Inputs"),i.a.createElement(U,null),i.a.createElement("div",{className:"head-text-2"},"Utility Inputs"),i.a.createElement(M,null)))},$=a(2);function H(e){return isFinite(+e)?0==e?0:e<.001?Object($.e)(".1e")(+e):e<1?Object($.e)(".2n")(+e):(e<10&&Object($.e)(".2n")(+e),e<1e3?Object($.e)(",.0f")(+e):e>=1e6?Object($.e)(".3s")(+e):Object($.e)(",.0f")(+e)):0}var G=function(e){var t=Object(r.useRef)(null);Object(r.useEffect)((function(){return n({}),window.addEventListener("resize",a),function(){return window.removeEventListener("resize",a)}}));var a=function(){n({ignoretransition:!0})},n=function(a){var n=t.current,r=e.barprops,i=r.total_cost,l=r.fine_2024,o=r.fine_2030,c=r.fine_2035,s=[{period:"2024-2029",utility:i,fine:l,util_and_fine:l+i},{period:"2030-2034",utility:i,fine:o,util_and_fine:o+i},{period:"2035+",utility:i,fine:c,util_and_fine:c+i}],u={fine:"#333333",utility:"#BAD636"},d=Object($.o)().keys(["utility","fine"])(s),m=0;d.forEach((function(e){e.forEach((function(e){m=Object($.h)([m,e[0],e[1]])}))}));var f=n.parentElement.getBoundingClientRect(),p=500;a.ignoretransition&&(p=0);var y=f.width-28,_=f.height-0,v=20,b=75,h=y-b-80,g=_-v-80,E=g/6,A=Object($.n)(n).selectAll("svg").data([0]).join("svg").attr("width",y).attr("height",_),O=Object($.l)().domain(["2024-2029","2030-2034","2035+"]).rangeRound([0,g]),j=Object($.m)().domain([m,0]).range([h,0]),w=(Object($.b)().scale(j).ticks(5),Object($.c)().scale(O).ticks(3).tickSize(0).tickSizeOuter(0)),S=Object($.n)(n).selectAll(".tooltip.tooltip-cost").data([0]).join("div").attr("class","tooltip tooltip-cost").style("opacity",0);A.selectAll(".bar").data(d,(function(e){return e.key})).join("g").attr("class",(function(e){return"bar bar-".concat(e.key)})).attr("transform","translate(".concat(b,", ").concat(v,")")).style("fill",(function(e,t){return u[e.key]})).selectAll("rect").data((function(e){return e})).join("rect").attr("class",(function(e){return"rect-".concat(e.data.period.replace("+",""))})).attr("y",(function(e,t){return O(e.data.period)+E/2})).on("mouseover",(function(e){var t=this;S.transition().duration(200).style("opacity",.9),"2035+"==e.data.period?S.html("\n                    <div class = 'tip-header'><u>".concat(e.data.period,"</u></div>\n                    <div>Utility Cost: $").concat(H(e.data.utility)+"/yr","</div>\n                    <div>Carbon Penalty: $").concat(H(e.data.fine)+"/yr","</div>\n                    <div>Total Cost: $").concat(H(e.data.util_and_fine)+"/yr","</div> \n                    <p class='fine-print'>\n                        <i>\n                            *Penalties for 2035 and up<br/>\n                            are highly variable and will <br/>\n                            likely change. Value shown <br/>\n                            for this period is only an <br/>\n                            estimate.\n                        </i>\n                    </p>\n                    ")):S.html("\n                    <div class = 'tip-header'><u>".concat(e.data.period,"</u></div>\n                    <div>Utility Cost: $").concat(H(e.data.utility)+"/yr","</div>\n                    <div>Carbon Penalty: $").concat(H(e.data.fine)+"/yr","</div>\n                    <div>Total Cost: $").concat(H(e.data.util_and_fine)+"/yr","</div> \n                    ")),S.style("left",(function(){return $.d.pageX-100})).style("top",$.d.pageY-300+"px"),Object($.n)(this).transition().duration(200).style("fill",(function(e,a){return Object($.k)(Object($.n)(t).style("fill")).darker()}))})).on("mouseout",(function(e){S.transition().duration(500).style("opacity",0),Object($.n)(this).transition().duration(200).style("fill",(function(e,t){return u[e.key]}))})).transition().duration(p).attr("x",(function(e){return j(e[0])})).attr("width",(function(e){return j(e[1])-j(e[0])})).attr("height",E);A.selectAll(".x-axis").data([0]).join("g").attr("class","x-axis").attr("transform","translate(".concat(b,", ").concat(g+v,")")),A.selectAll(".y-axis").data([0]).join("g").attr("class","y-axis").attr("transform","translate(".concat(b,", ").concat(v+E/7,")")),A.select(".y-axis").call(w),A.selectAll(".y-axis").selectAll("text").attr("x",-6);A.selectAll(".label").data(s,(function(e){return e.period})).join("text").attr("transform","translate(".concat(b,", ").concat(v,")")).attr("class","label").attr("text-anchor","start").transition().duration(p).attr("x",(function(e){return j(e.util_and_fine)+5})).attr("y",(function(e){return O(e.period)+E+4})).text((function(e){return 0==e.util_and_fine?"":"$"+H(e.util_and_fine)+"/yr"}));var I=A.selectAll(".legend").data([0]).join("g").attr("class","legend").join("g").attr("class","legend").attr("transform","translate(".concat(b,", ").concat(v+g+30,")"));I.selectAll("rect").data(Object.keys(u)).join("rect").attr("x",(function(e,t){return 180*t+5})).attr("y",0).attr("width",15).attr("height",15).style("fill",(function(e,t){return u[e]})).style("opacity",1),I.selectAll("text").data(Object.keys(u)).join("text").attr("x",(function(e,t){return 180*t+30})).attr("y",12).attr("font-size",14).attr("class","legend-text").style("text-anchor","start").style("opacity",1).text((function(e,t){switch(e){case"utility":return"Utility Cost ($)";case"fine":return"Estimated Penalty ($)"}})),A.selectAll(".rect-2035").style("opacity",(function(e,t){if(1==t||0==t)return.35}));var L=I.node().getBoundingClientRect(),N=L.width;L.height;I.attr("transform","translate(".concat(b+(h-N)/2,", ").concat(v+g+30,")")),0==i&&(Object($.n)(I.selectAll("text").nodes()[1]).style("opacity",.5),Object($.n)(I.selectAll("rect").nodes()[1]).style("opacity",.5)),0==l&&(Object($.n)(I.selectAll("text").nodes()[0]).style("opacity",.5),Object($.n)(I.selectAll("rect").nodes()[0]).style("opacity",.5))};return i.a.createElement("div",{className:"bar-container",ref:t})},V=function(e){var t=e.building.summary,a={total_cost:t.total_cost,fine_2024:t.fine_2024,fine_2030:t.fine_2030,fine_2035:t.fine_2035};return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"container-header"},"Estimated Annual Cost Summary"),i.a.createElement(G,{barprops:a}))},z=a(42),Y=function(e){var t=Object(r.useRef)(null);Object(r.useEffect)((function(){return n({}),window.addEventListener("resize",a),function(){return window.removeEventListener("resize",a)}}));var a=function(){n({ignoretransition:!0})},n=function(a){var n=t.current,r=e.carbondata,i=r.total_carbon,l=r.co2limit_2024,o=r.co2limit_2030,c=r.co2limit_2035,s=r.fine_2024,u=r.fine_2030,d=r.fine_2035,m=n.getBoundingClientRect(),f=500;a.ignoretransition&&(f=0);var p=m.width-28,y=m.height-0,_=y/6/1.5,v={t:Math.max(.4*y,100),b:35+.025*y,r:100,l:20},b=5,h=20,g=p-v.l-v.r,E=y-v.t-v.b,A=(p-h-20)/3,O=[{thresh:c,fine:d,key:"2035+"},{thresh:o,fine:u,key:"2030-2034"},{thresh:l,fine:s,key:"2024-2029"}],j=Object($.n)(n).selectAll(".tooltip.tooltip-carbon-bar").data([0]).join("div").attr("class","tooltip tooltip-carbon-bar").style("opacity",0),w=Object($.m)().domain([0,Object($.h)([l,i])]).range([0,g]),S=Object($.m)().domain([1,0]).range([-5,_+5]),I=Object($.n)(n).selectAll("svg").data([0]).join("svg").attr("width",p).attr("height",y),L=I.selectAll("g").data([0]).join("g").attr("class","bar-g").attr("width",g).attr("height",E).attr("transform","translate(".concat(v.l,", ").concat(v.t,")")),N=Object($.b)(w).ticks(5).tickSizeOuter(0),x=Object($.c)(S).tickSizeOuter(0),T=I.selectAll(".x-axis").data([0]).join("g").attr("class","x-axis").attr("transform","translate(".concat(v.l,", ").concat(v.b+_+v.t,")")),B=I.selectAll(".y-axis").data([0]).join("g").attr("class","y-axis").attr("transform","translate(".concat(v.l,", ").concat(v.t+_,")")).call(x);I.selectAll(".axis-title").data([0]).join("text").attr("class","axis-title").text((function(){return 0!=i?"Tons CO2 per year":""})).attr("x",v.l+g/2).attr("y",v.b+v.t+_+40+.05*y);var C=I.selectAll(".thresh-main-container").data([0]).join("g").attr("class","thresh-container").attr("transform","translate(".concat(h,", ").concat(b,")"));C.selectAll(".sub-container").data(O).join("g").attr("class",(function(e){return"sub-container ".concat(0==e.fine?"no-fine":"fine")})).each((function(e,t){var a=Object($.n)(this).selectAll("group").data([0]).join("g").attr("transform","translate(".concat(t*A,",0)"));a.selectAll(".rect-container").data([e]).join("rect").attr("class","rect-container").attr("width",270).attr("height",60).attr("rx",8).attr("fill",(function(e){return 0==e.fine?"#999999":"#595954"})),a.selectAll(".year-text").data([0]).join("text").attr("class","carbon-summary-text top-text").attr("x",10).attr("y",20).text(e.key),a.selectAll(".fine-text").data([0]).join("text").attr("class","carbon-summary-text fine-text").attr("x",10).attr("y",35).text("Threshold: ".concat(H(e.thresh)," tCO2e/yr")),a.selectAll(".thresh-text").data([0]).join("text").attr("class","carbon-summary-text thresh-text").attr("x",10).attr("y",50).text("Est. Penalty: $".concat(H(e.fine)+"/yr"));var n=[];a.selectAll("text").nodes().forEach((function(e){n.push(e.getBBox().width)}));var r=Object($.h)(n);a.select(".rect-container").attr("width",(function(){return r+40}))}));L.selectAll("rect").data([i]).join("rect").on("mouseover",(function(e){j.transition().duration(200).style("opacity",.9),j.html("\n                <div>".concat(H(i)," tCO2e/yr</div>\n                ")).style("left",(function(){return $.d.pageX-100})).style("top",$.d.pageY-100+"px"),Object($.n)(this).transition().duration(200).attr("fill",(function(e,t){return Object($.k)("#C4C4C4").darker()}))})).on("mouseout",(function(e){j.transition().duration(500).style("opacity",0),Object($.n)(this).transition().duration(200).attr("fill",(function(e,t){return"#C4C4C4"}))})).transition().duration(f).attr("y",_).attr("height",_).attr("fill","#C4C4C4").attr("x",0).attr("width",(function(e){return w(i)}));var k,D=(k=".rect-container",C.selectAll(k).nodes().map((function(e){return e.getAttribute("width")}))),R=Object(z.a)(D,3),M=R[0],F=R[1],U=R[2];if(O[0].rectwidth=U,O[1].rectwidth=F,O[2].rectwidth=M,y<220)T.call(N),I.selectAll(".axis-title").remove();else{T.call(N);try{I.selectAll(".tick").nodes()[0].remove()}catch(G){}}var P={0:3,1:2,2:1};L.selectAll("polyline").data(O,(function(e){return e.key})).join("polyline").attr("stroke","black").attr("stroke-width","1px").attr("fill","none").transition().duration(f).attr("points",(function(e,t){return e.thresh>2*i||0==e.thresh&&0==i?"":"\n                        ".concat(w(e.thresh),", ").concat(2*_,"\n                        ").concat(w(e.thresh),", ").concat(20-15*P[t],"\n                        ").concat(t*A+e.rectwidth/2,", ").concat(20-15*P[t],"\n                        ").concat(t*A+e.rectwidth/2,", ").concat(-(v.t-b-60),"\n                        ")})),0==i&&(B.remove(),T.remove(),L.remove()),T.selectAll(".domain").remove(),B.selectAll(".tick").remove()};return i.a.createElement("div",{className:"carbon-bar-card",ref:t})},W=function(e){var t=Object(r.useRef)(null),a=e.building.summary;Object(r.useEffect)((function(){n()}));var n=function(){var e=0;t.current.querySelectorAll(".carbon-summary-text").forEach((function(t){e=Math.max(e,t.getBoundingClientRect().width)})),0!=e&&t.current.querySelectorAll(".carbon-summary-text").forEach((function(t){t.setAttribute("width",e)}))},l={total_carbon:a.total_carbon,total_area:a.total_area,co2limit_2024:a.co2limit_2024,co2limit_2030:a.co2limit_2030,co2limit_2035:a.co2limit_2035,fine_2024:a.fine_2024,fine_2030:a.fine_2030,fine_2035:a.fine_2035};return l.carbon_norm=l.total_carbon/l.total_area,i.a.createElement("div",{className:"carbon-main-container"},i.a.createElement("div",{className:"container-header"},"Estimated Carbon Summary"),i.a.createElement("div",{ref:t,className:"carbon-summary-card"},i.a.createElement("div",{className:"summary-container summary-container-top"},i.a.createElement("div",{className:"carbon-summary-val"},H(l.total_carbon)),i.a.createElement("div",{className:"carbon-summary-text"},"tCO2e/yr")),i.a.createElement("div",{className:"summary-container summary-container-bottom"},i.a.createElement("div",{className:"carbon-summary-val"},H(l.carbon_norm)),i.a.createElement("div",{className:"carbon-summary-text"},"tCO2/sf/yr"))),i.a.createElement(Y,{carbondata:l}))},q=function(e){var t=Object(r.useRef)(null);Object(r.useEffect)((function(){return n({}),window.addEventListener("resize",a),function(){return window.removeEventListener("resize",a)}}));var a=function(){n({})},n=function(a){var n=t.current,r=e.donutprops,i=e.title,l=e.tag,o=n.parentElement.parentElement.getBoundingClientRect(),c=(o.width-40)/3,s=o.height-65,u=(Math.max(.01*s,10),Math.max(.05*s,40));var d=c,m=s-0-u,f=Math.max(.05*s,10),p=Math.min(d,m)/2,y={Electricity:"#358FB4",Gas:"#6EB12C",Steam:"#B23232","Fuel Two":"#A644E2","Fuel Four":"#62009E"},_={cost:{val:"$",val_norm:"$/sf/yr"},energy:{val:"kBtu",val_norm:"kBtu/sf/yr"},carbon:{val:"tCO2e",val_norm:"tCO2e/sf/yr"}},v=Object($.j)().value((function(e){return e.val})).sort(null),b=Object($.a)().innerRadius(.7*(p-f)).outerRadius(p-f),h=Object($.n)(n).selectAll("svg").data([0]).join("svg").attr("width",c).attr("height",s),g=h.selectAll("g").data([0]).join("g").attr("transform","translate(".concat(c/2,", ").concat(m/2+0,")")),E=0,A=0;r.forEach((function(e){E+=e.val,A+=e.val_norm}));h.selectAll(".titletext").data([0]).join("text").text(i).attr("class","titletext").attr("x",c/2).attr("y",m/2+0).attr("font-size",14).attr("fill",(function(){return 0!=H(E)?"black":"gray"})).attr("text-anchor","middle").style("font-family","CircularStd-Bold"),h.selectAll(".summarytext").data([E,A]).join("text").text((function(e,t){if(0==H(E))return"";if("cost"==l){if(0==t)return"$".concat(H(e));if(1==t)return"$".concat(H(e||0),"/sf/yr")}else{if(0==t)return"".concat(H(e)," ").concat(_[l].val," ");if(1==t)return"".concat(H(e||0)," ").concat(_[l].val_norm)}})).attr("class","summarytext").attr("x",c/2).attr("y",(function(e,t){return m+0+16*t+10})).attr("fill","black").attr("text-anchor","middle");var O=Object($.n)(n).selectAll(".tooltip.tooltip-donut").data([0]).join("div").attr("class","tooltip tooltip-donut").style("opacity",0),j=g.selectAll("path"),w=Object($.i)().key((function(e){return e})).entries(r).reverse(),S=j.data(),I=v(w[0].values);function L(e){return e.data.utility}function N(e){var t=Object($.f)(this._current,e);return this._current=t(0),function(e){return b(t(e))}}(j=j.data(I,L)).transition().duration(600).attrTween("d",N),j.enter().append("path").each((function(e,t){var a=function(e,t,a,n){var r;if(r=function(e,t,a,n){var r=t.length;for(;--e>=0;)for(var i=n(a[e]),l=0;l<r;++l)if(n(t[l])===i)return t[l]}(e,t,a,n)){var i=Object.assign({},r);return i.startAngle=r.endAngle,i}if(r=function(e,t,a,n){var r=a.length,i=t.length;for(;++e<r;)for(var l=n(a[e]),o=0;o<i;++o)if(n(t[o])===l)return t[o]}(e,t,a,n)){var l=Object.assign({},r);return l.endAngle=r.startAngle,l}return null}(t,S,I,L);a?(this._current=a,this._previous=a):this._current=e})).attr("fill",(function(e,t){return y[e.data.utility]})).on("mouseover",(function(e){O.transition().duration(200).style("opacity",.9),O.html("\n          <span class = 'tip-header'>".concat(e.data.utility,"</span>\n          <br/>\n          ").concat("cost"==l?"$".concat(H(e.data.val)):"".concat(H(e.data.val)," ").concat(_[l].val),"\n          <br/>\n          ").concat("cost"==l?"$".concat(H(e.data.val_norm),"/sf/yr"):"".concat(H(e.data.val_norm)," ").concat(_[l].val_norm),"\n            ")).style("left",(function(){return $.d.pageX-100})).style("top",$.d.pageY-100+"px"),Object($.n)(this).transition().duration(200).style("fill",(function(e,t){return Object($.k)(y[e.data.utility]).darker()}))})).on("mouseout",(function(e){O.transition().duration(500).style("opacity",0),Object($.n)(this).transition().duration(200).style("fill",(function(e,t){return y[e.data.utility]}))})).transition().duration(600).attrTween("d",N),j.exit().transition().duration(600).attrTween("d",(function(e,t){this._previous.data.utility;var a=Object($.g)(e,this._previous);return function(e){return b(a(e))}})).remove()};return i.a.createElement("div",{className:"donut-container",ref:t})},K=function(e){var t=Object(r.useRef)(null),a=e.legendprops;Object(r.useEffect)((function(){return n(),window.addEventListener("resize",n),function(){return window.removeEventListener("resize",n)}}));var n=function(){var e=t.current,n={Electricity:"#358FB4",Gas:"#6EB12C",Steam:"#B23232","Fuel Two":"#A644E2","Fuel Four":"#62009E"},r={Electricity:64,Gas:25,Steam:40,"Fuel Two":56,"Fuel Four":57},i={};a.forEach((function(e){0!=e.val&&(i[e.utility]={color:n[e.utility],textwidth:r[e.utility]})}));var l=e.parentElement.parentElement.getBoundingClientRect(),o=l.width,c=l.height,s=Object($.n)(e).selectAll("svg").data([0]).join("svg");s.attr("width",o).attr("height",c);var u=s.selectAll("g").data([0]).join("g");u.attr("transform","translate(0,10)");var d=u.selectAll("rect").data(Object.keys(i)).join("rect"),m=0;d.attr("fill",(function(e,t){return i[e].color})).attr("x",(function(e,t){var a=m;return m+=i[e].textwidth+35,a})).attr("y",(function(e,t){return 0})).attr("width",15).attr("height",15);var f=u.selectAll("text").data(Object.keys(i)).join("text"),p=0;f.text((function(e){return e})).attr("x",(function(e,t){var a=p;return p+=i[e].textwidth+35,a+22})).attr("y",(function(e,t){return 12})).attr("font-size",14);var y=u.node().getBBox().width;u.attr("transform","translate(".concat((o-y-20)/2,", 10)"))};return i.a.createElement("div",{className:"donut-legend-container",ref:t})},X=function(e){var t=e.building.utilities,a=t.kbtu,n=t.cost,r=t.carbon,l=t.kbtu_sf,o=t.cost_sf,c=t.carbon_sf,s=[{utility:"Electricity",val:n.elec,val_norm:o.elec},{utility:"Gas",val:n.gas,val_norm:o.gas},{utility:"Steam",val:n.steam,val_norm:o.steam},{utility:"Fuel Two",val:n.fuel_two,val_norm:o.fuel_two},{utility:"Fuel Four",val:n.fuel_four,val_norm:o.fuel_four}],u=[{utility:"Electricity",val:a.elec,val_norm:l.elec},{utility:"Gas",val:a.gas,val_norm:l.gas},{utility:"Steam",val:a.steam,val_norm:l.steam},{utility:"Fuel Two",val:a.fuel_two,val_norm:l.fuel_two},{utility:"Fuel Four",val:a.fuel_four,val_norm:l.fuel_four}],d=[{utility:"Electricity",val:r.elec,val_norm:c.elec},{utility:"Gas",val:r.gas,val_norm:c.gas},{utility:"Steam",val:r.steam,val_norm:c.steam},{utility:"Fuel Two",val:r.fuel_two,val_norm:c.fuel_two},{utility:"Fuel Four",val:r.fuel_four,val_norm:c.fuel_four}];return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"container-header"},"Estimated Building Metrics"),i.a.createElement("div",{className:"donuts"},i.a.createElement(q,{title:"Cost",donutprops:s,tag:"cost"}),i.a.createElement(q,{title:"Energy",donutprops:u,tag:"energy"}),i.a.createElement(q,{title:"Carbon",donutprops:d,tag:"carbon"})),i.a.createElement("div",{className:"legend"},i.a.createElement(K,{legendprops:u})))},J=C((function(e){return{building:e.building.compiled}}))((function(e){var t=e.building;return i.a.createElement("div",{className:"content-layout"},i.a.createElement("div",{className:"top-row"},i.a.createElement(W,{building:t})),i.a.createElement("div",{className:"bottom-row"},i.a.createElement("div",{className:"left-bottom cost-card"},i.a.createElement(V,{building:t})),i.a.createElement("div",{className:"right-bottom donut-card"},i.a.createElement(X,{building:t}))))})),Z=C((function(e){return{loadInputSelection:e.ui.loadInputSelection}}))((function(e){var t=e.loadInputSelection.property_name;return i.a.createElement("div",{className:"title-container"},i.a.createElement("div",{className:t?"title-text title-small":"title-text"},"NYC LL97 Carbon Emissions Calculator"),i.a.createElement("div",{className:"title-text property-name",onClick:t?function(){return e.actions.setLoadConfirmDialogActive(!0)}:null},t||""),i.a.createElement("div",{className:"title-after"}))})),Q=(C((function(e){return{isDemoMode:e.ui.isDemoMode,isLoadMode:e.ui.isLoadMode,loadInputSelection:e.ui.loadInputSelection}}))((function(e){e.isDemoMode,e.isLoadMode,e.loadInputSelection;return i.a.createElement("div",{className:"header"},i.a.createElement("div",{className:"header-left"}),i.a.createElement("div",{className:"header-middle"},i.a.createElement(Z,null)),i.a.createElement("div",{className:"header-right"}))})),function(e){var t=e.active,a=e.children,n=e.hideCallback,l=function(){n()},o=function(e){"Escape"==e.key&&l()},c=function(e){!e.target.classList.contains("modal-content")&&e.target.classList.contains("modal")&&l()};return Object(r.useEffect)((function(){return window.addEventListener("keydown",o),window.addEventListener("mousedown",c),function(){window.removeEventListener("keydown",o),window.removeEventListener("mousedown",c)}})),i.a.createElement("div",{className:"modal ".concat(t?"active":"inactive")},i.a.createElement("div",{className:"modal-content"},a))}),ee=function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement("ul",{className:"head-text-4"},i.a.createElement("li",null,"This calculator is based on interpretation of NYC Local Law 97 \u2013 2019 and provides only an approximation of the impact of the carbon emissions limits. As actual results will vary the tool should not be relied on as specific legal or risk mitigation guidance."),i.a.createElement("li",null,"Emission limits for the years 2035 thru 2050 are not yet determined for each individual occupancy group. The tool estimates a penalty for those years based on the average value for all covered buildings identified in the law."),i.a.createElement("li",null,"City agency rulemaking and enforcement practices may significantly impact the application of LL97 to individual buildings."),i.a.createElement("li",null,"LL97 provides a number of possible adjustments to the annual building emissions limit, including appeal based on special circumstances and critical building uses. These are not accounted for in the calculator.")))},te=(C((function(e){return{infoModalActive:e.ui.infoModalActive}}))((function(e){var t=e.infoModalActive,a=function(){e.actions.setInfoModalActive(!1)};return i.a.createElement(Q,{active:t,hideCallback:a},i.a.createElement("div",{className:"head-text-1"},"NYC LL97 Carbon Emissions Calculator",i.a.createElement("button",{className:"modal-exit-btn",onClick:a},"x")),i.a.createElement("div",{className:"instructions-container"},i.a.createElement("div",{className:"head-text-2"}," About"),i.a.createElement("div",{className:"head-text-4"},i.a.createElement("p",null,"This calculator estimates a building's carbon penalty as a result of"," ",i.a.createElement("a",{href:"https://be-exchange.org/insight/the-climate-mobilization-act-int-1253/",target:"_blank",rel:"noopener noreferrer"},"NYC LL97"),". Input annual utility information and building characteristics to generate emissions thresholds and resulting estimated penalties for three major penalty periods (2024-2029, 2030-2034, and 2035 and later)."),i.a.createElement("p",null,"This calculator is one tool in a",i.a.createElement("a",{href:"https://be-exchange.org/climate-mobilization-act-series/",target:"_blank",rel:"noopener noreferrer"}," ","suite of resources"," "),"developed by the Building Energy Exchange in partnership with the NYC Accelerator to help demystify the Climate Mobilization Act and connect our community to solutions. The calculator engine was developed by AKF Group LLC with UX/UI design by Jessica Celano."),i.a.createElement("p",null,"This application is optimized for Google Chrome. If experiencing issues with a different browser, please try again using Chrome."))),i.a.createElement("div",{className:"instructions-container"},i.a.createElement("div",{className:"head-text-2"}," Instructions"),i.a.createElement("div",{className:"head-text-4"},"Users can either load building data or enter manually, following the steps below."),i.a.createElement("ul",{className:"head-text-4"},i.a.createElement("li",null,'Select occupancy type(s) and input area(s). Occupancy types correspond to occupancy classes found in the NYC Building Code. To add more than one occupancy type use the "Add Occupancy Type" button.'),i.a.createElement("li",null,"Enter your annual consumption per fuel source for the entire building."),i.a.createElement("li",null,'Enter your annual utility rate for each fuel source (total annual utility cost divided by total annual consumption) or click "USE DEFAULT RATES" to pre-populate the form with NYC average rates for typical commercial buildings.'),i.a.createElement("li",null,"If the above data are unavailable, click the \u201cLOAD\u201d button and search for your building to populate the calculator with publicly available data found in NYC\u2019s LL84 Benchmarking Database."))),i.a.createElement("div",{className:"notes-clarifications-container"},i.a.createElement("div",{className:"head-text-2"},"Notes and Clarifications"),i.a.createElement(ee,null)))})),function(e){return i.a.createElement("div",{className:"footer"},i.a.createElement("div",{className:"footer-left"},i.a.createElement("p",null,"Download Dynamically Genereated File   ")),i.a.createElement("div",{className:"footer-right"}))}),ae=C((function(e){return{isSmallScreen:e.ui.isSmallScreen}}))((function(e){var t=e.isSmallScreen;return i.a.createElement("div",{className:"modal",style:{visibility:t?"visible":"hidden"}},i.a.createElement("div",{className:"modal-content",style:{height:"75vh",width:"75vw"}},i.a.createElement("div",{className:"head-text-1"}," NYC LL97 Carbon Calculator"),i.a.createElement("div",{className:"head-text-2"}," Browser too small to view app."),i.a.createElement("div",{className:"head-text-3",style:{marginLeft:20}},"please view on a larger device, increase window size or decrease browser zoom.")))})),ne={Office:"B (Business)","K-12 School":"E (Educational)",Hotel:"R-1 (Residential)","Worship Facility":"A (Assembly)","Other - Lodging/Residential":"R-1 (Residential)","Distribution Center":"S (Storage)","Non-Refrigerated Warehouse":"S (Storage)","Refrigerated Warehouse":"S (Storage)","Manufacturing/Industrial Plant":"F (Factory/Industrial)","Multifamily Housing":"R-2 (Residential)","Hospital (General Medical & Surgical)*":"I-2 (Institutional)",Other:"A (Assembly)","Other - Education":"A (Assembly)",Museum:"A (Assembly)","Other - Entertainment/Public Assembly":"A (Assembly)","Retail Store":"M (Mercantile)","College/University":"E (Educational)","Food Service":"F (Factory/Industrial)","Residence Hall/Dormitory":"R-1 (Residential)",Laboratory:"I-2 (Institutional)","Medical Office":"B (Business)","Urgent Care/Clinic/Other Outpatient":"B (Healthcare)","Hospital (General Medical & Surgical)":"B (Healthcare)","Ambulatory Surgical Center":"B (Healthcare)","Other - Specialty Hospital":"I-2 (Institutional)","Other - Mall":"B (Business)","Senior Care Community":"I-1 (Institutional)","Pre-school/Daycare":"E (Educational)","Social/Meeting Hall":"A (Assembly)","Performing Arts":"A (Assembly)",Parking:"U (Utility/Misc)","Adult Education":"E (Educational)","Self-Storage Facility":"U (Utility/Misc)","Financial Office":"B (Business)","Strip Mall":"M (Mercantile)","Prison/Incarceration":"I-3 (Institutional)","Fitness Center/Health Club/Gym":"B (Business)","Bank Branch":"B (Business)","Wholesale Club/Supercenter":"M (Mercantile)","Data Center":"B (Business)","Other - Services":"U (Utility/Misc)","Outpatient Rehabilitation/Physical Therapy":"B (Business)",Library:"A (Assembly)","Other - Recreation":"A (Assembly)","Supermarket/Grocery Store":"M (Mercantile)","Convenience Store without Gas Station":"M (Mercantile)","Residential Care Facility":"I-1 (Institutional)","Movie Theater":"A (Assembly)","Enclosed Mall":"A (Assembly)","Automobile Dealership":"B (Business)","Mailing Center/Post Office":"B (Business)","Personal Services (Health/Beauty, Dry Cleaning, etc)":"B (Business)",Courthouse:"A (Assembly)","Other - Technology/Science":"B (Business)","Other - Public Services":"B (Business)","Repair Services (Vehicle, Shoe, Locksmith, etc)":"B (Business)","Fire Station":"B (Business)","Police Station":"B (Business)","Wastewater Treatment Plant":"F (Factory/Industrial)","Veterinary Office":"B (Business)","Ice/Curling Rink":"A (Assembly)",Zoo:"A (Assembly)","Transportation Terminal/Station":"A (Assembly)","Stadium (Open)":"A (Assembly)",Restaurant:"A (Assembly)","Vocational School":"E (Educational)","Other - Restaurant/Bar":"B (Business)","Fast Food Restaurant":"A (Assembly)","Swimming Pool":"A (Assembly)","Bar/Nightclub":"A (Assembly)","Food Sales":"M (Mercantile)","Other - Utility":"U (Utility/Misc)","Bowling Alley":"A (Assembly)","Single Family Home":"A (Assembly)","Convention Center":"A (Assembly)"},re={"A (Assembly)":"A","B (Business)":"B_norm","B (Healthcare)":"B_health","E (Educational)":"E","F (Factory/Industrial)":"F","H (High Hazard)":"H","I-1 (Institutional)":"I1","I-2 (Institutional)":"I2","I-3 (Institutional)":"I3","I-4 (Institutional)":"I4","M (Mercantile)":"M","R-1 (Residential)":"R1","R-2 (Residential)":"R2","S (Storage)":"S","U (Utility/Misc)":"U"},ie=function(e){var t=ne[e],a=re[t];return{ll84:e,ll97_long:t||"A (Assembly)",ll97_short:a||"A"}},le=function(e){var t=e.loadTableData,a=e.handleLoad,n=e.loadInputResponse;if(e.isLoadedError)return i.a.createElement("div",null,"error accessing LL84 database...");var r=t.filter((function(e){return Object.values(e).every((function(e){return void 0!=e}))}));return 0==r.length&&(r=[{}]),i.a.createElement("div",{className:"load-modal-results-table-container"},i.a.createElement("table",{className:"load-modal-results-table"},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("td",null," ",""," "),Object.keys(Object.values(r)[0]).map((function(e,t){return i.a.createElement("td",{style:{width:[300,200,150,150,150,100][t]},key:t},e)})))),i.a.createElement("tbody",null,Object.values(r).map((function(e,t){return i.a.createElement("tr",{key:t},i.a.createElement("td",null,Object.keys(e).length>0?i.a.createElement("div",{className:"select-bldg-btn",onClick:function(){return a(n[t])}},"LOAD"):""),Object.values(e).map((function(e,t){return i.a.createElement("td",{key:t},e)})))})))))},oe=C((function(e){return{loadInputValue:e.ui.loadInputValue,loadInputResponse:e.ui.loadInputResponse,loadTableData:e.ui.loadTableData,loadBldgModalActive:e.ui.loadBldgModalActive,isDemoMode:e.ui.isDemoMode,isLoadMode:e.ui.isLoadMode,isLoadedError:e.ui.isLoadedError}}))((function(e){var t=e.loadInputValue,a=e.loadInputResponse,n=e.loadTableData,l=e.loadBldgModalActive,o=e.isLoadedError,c=Object(r.useRef)(null);Object(r.useEffect)((function(){c.current.focus()}),[l]);var s=function(){e.actions.setLoadBldgModalActive(!1)};return Object(r.useEffect)((function(){if("errorCode"in a)e.actions.setIsLoadedError(!0);else{e.actions.setIsLoadedError(!1);var t=a.map((function(e){return{Name:e.property_name,BBL:e.nyc_borough_block_and_lot,BIN:e.nyc_building_identification,"Property Type 1":e.largest_property_use_type,"Property Type 2":e._2nd_largest_property_use,"Property Type 3":e._3rd_largest_property_use}}));e.actions.setLoadTableData(t)}}),[a,e.actions]),i.a.createElement(Q,{active:l,hideCallback:s},i.a.createElement("div",null,i.a.createElement("div",{className:"head-text-1"},"Building Utility Info Loader",i.a.createElement("button",{className:"modal-exit-btn",onClick:s},"x"))),i.a.createElement("div",{className:"load-modal-body"},i.a.createElement("div",null,i.a.createElement("p",null,"This form allows for querying NYC's \"Energy and Water Data Disclosure for Local Law 84 2020 (Data for Calendar Year 2019)\" database. The form loads and translates building utility information, either using the property's BBL number, address, or property name (searches are case sensitive)."),i.a.createElement("p",null,"Data loaded using this form should be verified with building utility consumption and gross square footage.")),i.a.createElement("div",null,i.a.createElement("span",{className:"head-text-3"},"Input BBL ID Number, Property Name, or Address (case sensitive)")),i.a.createElement("input",{ref:c,className:"bldg-input",value:t,onChange:function(t){e.actions.setLoadInputValue(t.target.value),function(e,t){var a="https://data.cityofnewyork.us/resource/wcm8-aq5w.json?$query= SELECT "+["property_name","property_id","nyc_borough_block_and_lot","nyc_building_identification","largest_property_use_type_1","largest_property_use_type","_2nd_largest_property_use","_2nd_largest_property_use_1","_3rd_largest_property_use","_3rd_largest_property_use_1","fuel_oil_2_use_kbtu","fuel_oil_4_use_kbtu","district_steam_use_kbtu","natural_gas_use_kbtu","electricity_use_grid_purchase"].toString()+" WHERE property_name LIKE '%25"+e+"%25' OR nyc_borough_block_and_lot LIKE '%25"+e+"%25' OR address_1 LIKE '%25"+e+"%25' OR nyc_building_identification LIKE '%25"+e+"%25' LIMIT 8",n=new XMLHttpRequest;n.open("GET",a,!0),n.onreadystatechange=function(e){var r,i=n.response;try{r=JSON.parse(i)}catch(l){r=JSON.parse('"'.concat(i,'"'))}if(""==r)t([{}]);else try{r=r.filter((function(e){return Object.values(e).every((function(e){return void 0!=e}))})),t(r)}catch(o){console.log(a),console.log(r)}},n.send()}(t.target.value,e.actions.setLoadInputResponse)}}),i.a.createElement(le,{loadTableData:n,handleLoad:function(t){var a=function(e){var t={types:{},utilities:{elec:{cons:0,rate:0},gas:{cons:0,rate:0},steam:{cons:0,rate:0},fuel_two:{cons:0,rate:0},fuel_four:{cons:0,rate:0}}},a=function(e){return Math.round(+e)},n=e.district_steam_use_kbtu,r=e.natural_gas_use_kbtu,i=e.fuel_oil_2_use_kbtu,l=e.fuel_oil_4_use_kbtu,o=a(e.electricity_use_grid_purchase/3.412),c=a(n/1194),s=a(r/100),u=a(i/138),d=a(l/146);t.utilities.elec={cons:+o||0,rate:0},t.utilities.steam={cons:+c||0,rate:0},t.utilities.gas={cons:+s||0,rate:0},t.utilities.fuel_two={cons:+u||0,rate:0},t.utilities.fuel_four={cons:+d||0,rate:0};var m=e.largest_property_use_type,f=e.largest_property_use_type_1,p=e._2nd_largest_property_use,y=e._2nd_largest_property_use_1,_=e._3rd_largest_property_use,v=e._3rd_largest_property_use_1;return t.types={1:{type:ie(m).ll97_short,area:a(f),id:1},2:{type:ie(p).ll97_short,area:a(y),id:2},3:{type:ie(_).ll97_short,area:a(v),id:3}},"Not Available"!==m&&f&&0!=f||delete t.types[1],"Not Available"!==p&&y&&0!=y||delete t.types[2],"Not Available"!==_&&v&&0!=v||delete t.types[3],t}(t);e.actions.setLoadInputSelection(t),e.actions.setIsLoadMode(!0),e.actions.setIsDemoMode(!1),e.actions.setBuilding(a),e.actions.setIsDefaultRates(!0),e.actions.useDefaultRates(),e.actions.setLoadConfirmDialogActive(!0),s()},loadInputResponse:a,isLoadedError:o})))})),ce=C((function(e){return{loadConfirmDialogActive:e.ui.loadConfirmDialogActive,loadInputSelection:e.ui.loadInputSelection,loadedBuildingTypes:e.building.loadedBuildingTypes,building:e.building.compiled,inputs:e.building.inputs}}))((function(e){var t=e.loadConfirmDialogActive,a=e.loadInputSelection,n=e.inputs,r=function(){e.actions.setLoadConfirmDialogActive(!1)},l={property_name:"Property Name",property_id:"Property ID",nyc_borough_block_and_lot:"BBL ID (10 digit)",nyc_building_identification:"NYC Building Identification Number (BIN)",largest_property_use_type_1:"Property Type 1 Area",largest_property_use_type:"Property Type 1",_2nd_largest_property_use:"Property Type 2 Area",_2nd_largest_property_use_1:"Property Type 2",_3rd_largest_property_use:"Property Type 3 Area",_3rd_largest_property_use_1:"Property Type 3",fuel_oil_2_use_kbtu:"Fuel Oil Two Use (kBtu)",fuel_oil_4_use_kbtu:"Fuel Oil Four Use (kBtu)",district_steam_use_kbtu:"District Steam Use (kBtu)",natural_gas_use_kbtu:"Natural Gas Use (kBtu)",electricity_use_grid_purchase:"Electricity Purchased From Grid (kBtu)"},o=i.a.createElement("ul",null,Object.keys(a).map((function(e,t){var n=l[e],r=a[e];return"Not Available"!==r&0!==r?i.a.createElement("li",{key:t},n,": ",r):""}))),c=function(){var e=ie(a.largest_property_use_type),t=ie(a._2nd_largest_property_use),r=ie(a._3rd_largest_property_use),i=e.ll84,l=t.ll84,o=r.ll84,c=e.ll97_long,s=t.ll97_long,u=r.ll97_long;return{1:{ll84:i,ll97:c,area:n.types[1]?n.types[1].area:void 0},2:{ll84:l,ll97:s,area:n.types[2]?n.types[2].area:void 0},3:{ll84:o,ll97:u,area:n.types[3]?n.types[3].area:void 0}}}(),s=Object.keys(c).map((function(e,t){var a=c[e].ll84,n=c[e].ll97,r=c[e].area;return void 0===r?"":i.a.createElement("li",{key:t},"LL84 Building Type ",i.a.createElement("u",null,a)," (",r," SF) mapped to"," ",i.a.createElement("u",null,n))}));return i.a.createElement(Q,{active:t,hideCallback:r},i.a.createElement("div",{className:"head-text-1"},"Loaded Building Data Summary for ",a.property_name,i.a.createElement("button",{className:"modal-exit-btn",onClick:r},"x")),i.a.createElement("div",{className:"load-modal-body"},i.a.createElement("div",{className:"head-text-3"},"The following info has been loaded from the NYC LL84 Database. Note that inputs should be verified by the building owner / stakeholder for accuracy."),i.a.createElement("div",{className:"head-text-4"},o),i.a.createElement("div",{className:"head-text-3"},"Because property use types in LL84 do not align with occupancy classes referenced in LL97, an attempt has been made to correlate the loaded building's LL84 property use to the closest LL97 type:"),i.a.createElement("div",{className:"head-text-4"},i.a.createElement("ul",null,s)),i.a.createElement("div",{className:"head-text-3"},'Please verify the above mapping and make any changes necessary to areas and utility consumption in the "Building Inputs" section of the calculator.'),i.a.createElement("div",{className:"ok-dialog-btn-container"},i.a.createElement("button",{style:{height:"42px"},className:"ok-dialog-btn",onClick:r},"OK"))))})),se=C((function(e){return{utilityRateModalActive:e.ui.utilityRateModalActive}}))((function(e){var t=e.utilityRateModalActive,a=function(){e.actions.setUtilityRateModalActive(!1)};return i.a.createElement(Q,{active:t,hideCallback:a},i.a.createElement("div",null,i.a.createElement("div",{className:"head-text-1"},"Default Utility Rate Information",i.a.createElement("button",{className:"modal-exit-btn",onClick:a},"x"))),i.a.createElement("div",{className:"load-modal-body"},i.a.createElement("div",null,i.a.createElement("p",null,'This calculator provides default NYC utility rates as a convenience for contextualizing LL97 penalties as fractions of overall operating cost. These are "virtual" utility rates, equivalent to the total annual utility cost divided by the total annual consumption (i.e., $/kWh, $/therm, etc) for that fuel source.'),i.a.createElement("p",null,"Actual rates will vary according to individual rate structure, demand charges, and fluctuations in energy cost. The default rates shown below and used in the calculator are reflective of NYC averages for typical commercial buildings."),i.a.createElement("ul",null,i.a.createElement("li",null,"Electricity: $0.22/kWh"),i.a.createElement("li",null,"Natural Gas: $0.997/therm"),i.a.createElement("li",null,"District Steam: $35/MMBtu"),i.a.createElement("li",null,"Fuel Oil #2: $1.65/gal"),i.a.createElement("li",null,"Fuel Oil #4: $1.65/gal")))))})),ue=(a(100),a(101),a(102),a(103),a(104),a(105),a(106),a(107),a(108),a(109),a(110),C((function(e){return{dims:e.ui.dims}}))((function(e){var t=e.dims;Object(r.useEffect)((function(){return window.addEventListener("resize",a),function(){return window.removeEventListener("resize",a)}}));var a=function(){e.actions.setDimensions({height:window.innerHeight,width:window.innerWidth})};return Object(r.useEffect)((function(){t.width<800||t.height<600?e.actions.setIsSmallScreen(!0):e.actions.setIsSmallScreen(!1)}),[t,e.actions]),i.a.createElement(i.a.Fragment,null,i.a.createElement(oe,null),i.a.createElement(ce,null),i.a.createElement(se,null),i.a.createElement(ae,null),i.a.createElement("div",{className:"main-container"},i.a.createElement(P,null),i.a.createElement(J,null),i.a.createElement(te,null)))})));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var de=a(43),me={dims:{height:window.innerHeight,width:window.innerWidth},isDemoMode:!1,isLoadMode:!1,infoModalActive:!0,loadBldgModalActive:!1,utilityRateModalActive:!1,loadInputValue:"",loadInputResponse:[{}],loadInputSelection:{},loadTableData:[{}],isSmallScreen:!1,loadConfirmDialogActive:!1,isLoadedError:!1};var fe=function(e){var t={A:[.01074,.0042,.0014],B_health:[.02381,.0133,.0014],B_norm:[.00846,.00453,.0014],E:[.00758,.00344,.0014],F:[.00574,.00167,.0014],H:[.02381,.0133,.0014],I1:[.01138,.00598,.0014],I2:[.02381,.0133,.0014],I3:[.02381,.0133,.0014],I4:[.00758,.00344,.0014],M:[.01181,.00403,.0014],R1:[.00987,.00526,.0014],R2:[.00675,.00407,.0014],S:[.00426,.0011,.0014],U:[.00426,.0011,.0014]},a=0,n=0,r=0,i=0,l=e.types,o=e.utilities;Object.values(l).forEach((function(e){var l=+t[e.type][0]*+e.area,o=+t[e.type][1]*+e.area,c=+t[e.type][2]*+e.area;n+=l,r+=o,i+=c,a+=+e.area}));var c=3.412*+o.elec.cons,s=100*+o.gas.cons,u=1194*+o.steam.cons,d=138*+o.fuel_two.cons,m=146*+o.fuel_four.cons,f=84689e-9*c,p=5311e-8*s,y=4493e-8*u,_=7421e-8*d,v=7529e-8*m,b=+o.elec.cons*+o.elec.rate,h=+o.gas.cons*+o.gas.rate,g=+o.steam.cons*+o.steam.rate,E=+o.fuel_two.cons*+o.fuel_two.rate,A=+o.fuel_four.cons*+o.fuel_four.rate,O=c/a,j=s/a,w=u/a,S=d/a,I=m/a,L=f/a,N=p/a,x=y/a,T=_/a,B=v/a,C=b/a,k=h/a,D=g/a,R=E/a,M=A/a,F=f+p+y+_+v,U=F>n?268*(F-n):0,P=F>r?268*(F-r):0,$=F>i?268*(F-i):0;return a<25e3&&(U=0,P=0,$=0,n=0,r=0,i=0),{summary:{total_carbon:F,total_cost:b+h+g+E+A,total_area:a,co2limit_2024:n,co2limit_2030:r,co2limit_2035:i,fine_2024:U,fine_2030:P,fine_2035:$},utilities:{native:{elec:+o.elec.cons,gas:+o.gas.cons,steam:+o.steam.cons,fuel_two:+o.fuel_two.cons,fuel_four:+o.fuel_four.cons},rates:{elec:+o.elec.rate,gas:+o.gas.rate,steam:+o.steam.rate,fuel_two:+o.fuel_two.rate,fuel_four:+o.fuel_four.rate},kbtu:{elec:c,gas:s,steam:u,fuel_two:d,fuel_four:m},carbon:{elec:f,gas:p,steam:y,fuel_two:_,fuel_four:v},cost:{elec:b,gas:h,steam:g,fuel_two:E,fuel_four:A},cost_sf:{elec:C,gas:k,steam:D,fuel_two:R,fuel_four:M},kbtu_sf:{elec:O,gas:j,steam:w,fuel_two:S,fuel_four:I},carbon_sf:{elec:L,gas:N,steam:x,fuel_two:T,fuel_four:B}}}},pe={inputs:{types:{1:{type:"A",area:"",id:1}},utilities:{elec:{cons:"",rate:""},gas:{cons:"",rate:""},steam:{cons:"",rate:""},fuel_two:{cons:"",rate:""},fuel_four:{cons:"",rate:""}}},compiled:fe({types:{1:{type:"A",area:"",id:1}},utilities:{elec:{cons:"",rate:""},gas:{cons:"",rate:""},steam:{cons:"",rate:""},fuel_two:{cons:"",rate:""},fuel_four:{cons:"",rate:""}}}),isDefaultRates:!1,loadedResponse:{}};var ye=Object(d.c)({ui:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:me,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_IS_LOADED_ERROR":return Object(s.a)(Object(s.a)({},e),{},{isLoadedError:t.payload});case"SET_LOAD_CONFIRM_DIALOG_ACTIVE":return Object(s.a)(Object(s.a)({},e),{},{loadConfirmDialogActive:t.payload});case"SET_UTILITY_RATE_MODAL_ACTIVE":return Object(s.a)(Object(s.a)({},e),{},{utilityRateModalActive:t.payload});case"SET_IS_SMALL_SCREEN":return Object(s.a)(Object(s.a)({},e),{},{isSmallScreen:t.payload});case"SET_LOAD_TABLE_DATA":return Object(s.a)(Object(s.a)({},e),{},{loadTableData:t.payload});case"SET_LOAD_INPUT_VALUE":return Object(s.a)(Object(s.a)({},e),{},{loadInputValue:t.payload});case"SET_LOAD_INPUT_RESPONSE":return Object(s.a)(Object(s.a)({},e),{},{loadInputResponse:t.payload});case"SET_LOAD_INPUT_SELECTION":return Object(s.a)(Object(s.a)({},e),{},{loadInputSelection:t.payload});case"SET_DIMENSIONS":return Object(s.a)(Object(s.a)({},e),{},{dims:t.payload});case"SET_IS_LOAD_MODE":return Object(s.a)(Object(s.a)({},e),{},{isLoadMode:t.payload});case"SET_IS_DEMO_MODE":return Object(s.a)(Object(s.a)({},e),{},{isDemoMode:t.payload});case"SET_LOAD_MODAL_ACTIVE":return Object(s.a)(Object(s.a)({},e),{},{loadBldgModalActive:t.payload});case"SET_INFO_MODAL_ACTIVE":return Object(s.a)(Object(s.a)({},e),{},{infoModalActive:t.payload});default:return e}},building:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_IS_DEFAULT_RATES":return Object(s.a)(Object(s.a)({},e),{},{isDefaultRates:t.payload});case"USE_DEFAULT_RATES":var a=Object(s.a)({},e.inputs);a.utilities.elec.rate="0.22",a.utilities.gas.rate="0.997",a.utilities.steam.rate="35",a.utilities.fuel_two.rate="1.65",a.utilities.fuel_four.rate="1.65";var n=fe(a);return Object(s.a)(Object(s.a)({},e),{},{inputs:a,compiled:n});case"USE_NULL_RATES":var r=Object(s.a)({},e.inputs);r.utilities.elec.rate="",r.utilities.gas.rate="",r.utilities.steam.rate="",r.utilities.fuel_two.rate="",r.utilities.fuel_four.rate="";var i=fe(r);return Object(s.a)(Object(s.a)({},e),{},{inputs:r,compiled:i});case"SET_BUILDING":return Object(s.a)(Object(s.a)({},e),{},{inputs:t.payload,compiled:fe(t.payload)});case"SET_DEMO_BUILDING":return Object(s.a)(Object(s.a)({},e),{},{inputs:{types:{1:{type:"B_norm",area:5e4,id:1},2:{type:"A",area:3e3,id:2}},utilities:{elec:{cons:75e4,rate:.193},gas:{cons:1e4,rate:1.001},steam:{cons:250,rate:32.8},fuel_two:{cons:500,rate:1.43},fuel_four:{cons:0,rate:1.43}}},compiled:fe({types:{1:{type:"B_norm",area:5e4,id:1},2:{type:"A",area:3e3,id:2}},utilities:{elec:{cons:75e4,rate:.193},gas:{cons:1e4,rate:1.001},steam:{cons:250,rate:32.8},fuel_two:{cons:500,rate:1.43},fuel_four:{cons:0,rate:1.43}}})});case"SET_DEFAULT_BUILDING":return Object(s.a)({},pe);default:return e}}}),_e=a(12),ve=Object(de.a)({reducer:ye,middleware:[_e.a]});a(111);a.d(t,"store",(function(){return ve})),Object.values||(Object.values=function(e){return Object.keys(e).map((function(t){return e[t]}))}),window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=function(e,t){t=t||window;for(var a=0;a<this.length;a++)e.call(t,this[a],a,this)}),Array.prototype.map||(Array.prototype.map=function(e){var t,a,n;if(null==this)throw new TypeError("this is null or not defined");var r=Object(this),i=r.length>>>0;if("function"!==typeof e)throw new TypeError(e+" is not a function");for(arguments.length>1&&(t=arguments[1]),a=new Array(i),n=0;n<i;){var l,o;n in r&&(l=r[n],o=e.call(t,l,n,r),a[n]=o),n++}return a}),o.a.render(i.a.createElement(i.a.Fragment,null,i.a.createElement(u.a,{store:ve},i.a.createElement(ue,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},92:function(e,t,a){e.exports=a(112)}},[[92,1,2]]]);
//# sourceMappingURL=main.d9a19c0e.chunk.js.map