(this["webpackJsonpnyc-carbon"]=this["webpackJsonpnyc-carbon"]||[]).push([[0],{101:function(t,e,a){},102:function(t,e,a){},103:function(t,e,a){},104:function(t,e,a){},105:function(t,e,a){},106:function(t,e,a){},107:function(t,e,a){},108:function(t,e,a){},109:function(t,e,a){},110:function(t,e,a){},111:function(t,e,a){},112:function(t,e,a){t.exports=a.p+"static/media/CircularStd-Black.7f42d848.otf"},113:function(t,e,a){"use strict";a.r(e);var n={};a.r(n),a.d(n,"setDimensions",(function(){return m})),a.d(n,"setIsDemoMode",(function(){return f})),a.d(n,"setIsLoadMode",(function(){return y})),a.d(n,"setLoadBldgModalActive",(function(){return p})),a.d(n,"setUtilityRateModalActive",(function(){return _})),a.d(n,"setLoadConfirmDialogActive",(function(){return v})),a.d(n,"setInfoModalActive",(function(){return b})),a.d(n,"setBuilding",(function(){return g})),a.d(n,"setDefaultBuilding",(function(){return h})),a.d(n,"setDemoBuilding",(function(){return E})),a.d(n,"setIsSmallScreen",(function(){return O})),a.d(n,"setLoadTableData",(function(){return A})),a.d(n,"setLoadInputValue",(function(){return j})),a.d(n,"setLoadInputResponse",(function(){return w})),a.d(n,"setLoadInputSelection",(function(){return S})),a.d(n,"setIsLoadedError",(function(){return I})),a.d(n,"setIsDefaultRates",(function(){return L})),a.d(n,"useDefaultRates",(function(){return B})),a.d(n,"useNullRates",(function(){return N}));var r=a(0),i=a.n(r),l=a(16),o=a.n(l),c=a(124),s=a(3),u=a(19),d=a(4);function m(t){return{type:"SET_DIMENSIONS",payload:t}}function f(t){return{type:"SET_IS_DEMO_MODE",payload:t}}function y(t){return{type:"SET_IS_LOAD_MODE",payload:t}}function p(t){return{type:"SET_LOAD_MODAL_ACTIVE",payload:t}}function _(t){return{type:"SET_UTILITY_RATE_MODAL_ACTIVE",payload:t}}function v(t){return{type:"SET_LOAD_CONFIRM_DIALOG_ACTIVE",payload:t}}function b(t){return{type:"SET_INFO_MODAL_ACTIVE",payload:t}}function g(t){return{type:"SET_BUILDING",payload:t}}function h(){return{type:"SET_DEFAULT_BUILDING"}}function E(){return{type:"SET_DEMO_BUILDING"}}function O(t){return{type:"SET_IS_SMALL_SCREEN",payload:t}}function A(t){return{type:"SET_LOAD_TABLE_DATA",payload:t}}function j(t){return{type:"SET_LOAD_INPUT_VALUE",payload:t}}function w(t){return{type:"SET_LOAD_INPUT_RESPONSE",payload:t}}function S(t){return{type:"SET_LOAD_INPUT_SELECTION",payload:t}}function I(t){return{type:"SET_IS_LOADED_ERROR",payload:t}}function L(t){return{type:"SET_IS_DEFAULT_RATES",payload:t}}function B(){return{type:"USE_DEFAULT_RATES"}}function N(){return{type:"USE_NULL_RATES"}}var T=function(t){return{actions:Object(d.b)(n,t)}},x=function(t){return{data:Object(s.a)({},t)}},k=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:T;return Object(u.b)(t,e)},R=a(10),D=k((function(t,e){var a=e.utiltag;return{vals:t.building.inputs.utilities[a],inputs:t.building.inputs}}))((function(t){var e=t.title,a=t.cons_title,n=t.cost_title,l=t.utiltag,o=t.inputs,c=t.vals,s=Object(r.useRef)(null),u=Object(r.useRef)(null);return i.a.createElement("div",{className:"".concat(l,"-container utility-input-container")},i.a.createElement("div",{className:"consumption-container"},i.a.createElement("div",{className:"head-text-4"},"".concat(e," - ").concat(a)),i.a.createElement(R.a,{ref:s,displayType:"input",datatag:l,onValueChange:function(e){var a=e.floatValue,n=s.current.props.datatag,r=Object.assign({},o);r.utilities[n].cons=a||0,t.actions.setBuilding(r)},thousandSeparator:!0,value:c.cons})),i.a.createElement("div",{className:"cost-container"},i.a.createElement("div",{className:"head-text-4"},n),i.a.createElement(R.a,{ref:u,displayType:"input",datatag:l,onValueChange:function(e){var a=e.floatValue,n=u.current.props.datatag,r=Object.assign({},o);r.utilities[n].rate=a||0,t.actions.setBuilding(r)},value:c.rate})))})),C=Object(c.a)({root:{},defaultRateText:{cursor:"pointer",color:"blue"}}),M=k((function(t){return{inputs:t.building.inputs,isDefaultRates:t.building.isDefaultRates}}))((function(t){var e=t.isDefaultRates,a=C();return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"default-rate-checkbox head-text-4"},i.a.createElement("input",{type:"checkbox",checked:e,onChange:function(){e?(t.actions.setIsDefaultRates(!1),t.actions.useNullRates()):(t.actions.setIsDefaultRates(!0),t.actions.useDefaultRates())}}),i.a.createElement("div",{className:"head-text-4"},i.a.createElement("span",null,"Use Default Rates"),i.a.createElement("span",{onClick:function(){t.actions.setUtilityRateModalActive(!0)},className:a.defaultRateText}," ",i.a.createElement("u",null,"?")))),i.a.createElement("div",{className:"utility-input-main-container"},i.a.createElement(D,{title:"Electricity",cons_title:"kWh",utiltag:"elec",cost_title:"$/kWh"}),i.a.createElement(D,{title:"Natural Gas",cons_title:"therms",utiltag:"gas",cost_title:"$/therm"}),i.a.createElement(D,{title:"Steam",cons_title:"mLbs",utiltag:"steam",cost_title:"$/mLb"}),i.a.createElement(D,{title:"Fuel Oil 2",cons_title:"gal",utiltag:"fuel_two",cost_title:"$/gal"}),i.a.createElement(D,{title:"Fuel Oil 4",cons_title:"gal",utiltag:"fuel_four",cost_title:"$/gal"})))})),F=k((function(t){return{inputs:t.building.inputs}}))((function(t){var e=t.typenum,a=t.bldgtype,n=t.area,l=t.inputs,o=Object(r.useRef)(null),c={A:"A (Assembly)",B_norm:"B (Business)",B_health:"B (Healthcare)",E:"E (Educational)",F:"F (Factory/Industrial)",H:"H (High Hazard)",I1:"I-1 (Institutional)",I2:"I-2 (Institutional)",I3:"I-3 (Institutional)",I4:"I-4 (Institutional)",M:"M (Mercantile)",R1:"R-1 (Residential)",R2:"R-2 (Residential)",S:"S (Storage)",U:"U (Utility/Misc)"};return i.a.createElement("div",{className:"bldg-input-container"},i.a.createElement("div",{className:"type-controls-container"},i.a.createElement("div",{className:"type-label"},"".concat(e)),i.a.createElement("div",{className:"type-container"},i.a.createElement("select",{className:"bldg-type-select",datatag:e,onChange:function(e){var a=Object.assign({},l),n=e.target.value,r=e.target.getAttribute("datatag");a.types[r].type=n,t.actions.setBuilding(a)},value:a},Object.keys(c).map((function(t){return i.a.createElement("option",{value:t,key:t+"-option"},c[t])})))),i.a.createElement("div",{className:"area-container"},i.a.createElement(R.a,{ref:o,datatag:e,onValueChange:function(e){var a=e.floatValue,n=Object.assign({},l),r=o.current.props.datatag;n.types[r].area=a||0,t.actions.setBuilding(n)},thousandSeparator:!0,value:n}),i.a.createElement("button",{className:"type-remove-btn",dataremove:e,onClick:function(e){var a=e.target.getAttribute("dataremove"),n=Object.assign({},l);delete n.types[a],t.actions.setBuilding(n)}},"X"))),i.a.createElement("div",{className:"bldg-input-border"}))})),U=k((function(t){return{inputs:t.building.inputs}}))((function(t){var e=t.inputs;return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"input-header-type head-text-4"},"Building Type",i.a.createElement("a",{href:"https://up.codes/viewer/new_york_city/nyc-building-code-2014/chapter/3/use-and-occupancy-classification#3",target:"_blank",rel:"noopener noreferrer"},i.a.createElement("span",{style:{marginLeft:"5px",paddingTop:"5px"}},"?"))),i.a.createElement("div",{className:"input-header-area head-text-4"},"Area (SF)"),Object.keys(e.types).map((function(t){var a=e.types[t],n=a.type,r=a.area;return i.a.createElement(i.a.Fragment,{key:t},i.a.createElement(F,{bldgtype:n,area:r,typenum:t}))})),i.a.createElement("div",{className:"add-building-type"},i.a.createElement("button",{onClick:function(){for(var a=Object.assign({},e),n=Object.keys(a.types).length+1;n in a.types;)n++;a.types[n]={type:"A",area:0,id:n},t.actions.setBuilding(a)}},"+"),i.a.createElement("div",null,"Add Building Type")))})),P=function(t){return i.a.createElement("div",{className:"sidebar"},i.a.createElement("div",{className:"sidebar-main-container"},i.a.createElement("div",{className:"head-text-2"},"Building Inputs"),i.a.createElement(U,null),i.a.createElement("div",{className:"head-text-2"},"Utility Inputs"),i.a.createElement(M,null)))},$=a(2);function H(t){return isFinite(+t)?0==t?0:t<.001?Object($.e)(".1e")(+t):t<1?Object($.e)(".2n")(+t):(t<10&&Object($.e)(".2n")(+t),t<1e3?Object($.e)(",.0f")(+t):t>=1e6?Object($.e)(".3s")(+t):Object($.e)(",.0f")(+t)):0}var V=function(t){var e=Object(r.useRef)(null);Object(r.useEffect)((function(){return n({}),window.addEventListener("resize",a),function(){return window.removeEventListener("resize",a)}}));var a=function(){n({ignoretransition:!0})},n=function(a){var n=e.current,r=t.barprops,i=r.total_cost,l=r.fine_2024,o=r.fine_2030,c=r.fine_2035,s=[{period:"2024-2029",utility:i,fine:l,util_and_fine:l+i},{period:"2030-2034",utility:i,fine:o,util_and_fine:o+i},{period:"2035+",utility:i,fine:c,util_and_fine:c+i}],u={fine:"#333333",utility:"#BAD636"},d=Object($.o)().keys(["utility","fine"])(s),m=0;d.forEach((function(t){t.forEach((function(t){m=Object($.h)([m,t[0],t[1]])}))}));var f=n.parentElement.getBoundingClientRect(),y=500;a.ignoretransition&&(y=0);var p=f.width-28,_=f.height-0,v=20,b=75,g=p-b-80,h=_-v-80,E=h/6,O=Object($.n)(n).selectAll("svg").data([0]).join("svg").attr("width",p).attr("height",_),A=Object($.l)().domain(["2024-2029","2030-2034","2035+"]).rangeRound([0,h]),j=Object($.m)().domain([m,0]).range([g,0]),w=(Object($.b)().scale(j).ticks(5),Object($.c)().scale(A).ticks(3).tickSize(0).tickSizeOuter(0)),S=Object($.n)(n).selectAll(".tooltip.tooltip-cost").data([0]).join("div").attr("class","tooltip tooltip-cost").style("opacity",0);O.selectAll(".bar").data(d,(function(t){return t.key})).join("g").attr("class",(function(t){return"bar bar-".concat(t.key)})).attr("transform","translate(".concat(b,", ").concat(v,")")).style("fill",(function(t,e){return u[t.key]})).selectAll("rect").data((function(t){return t})).join("rect").attr("class",(function(t){return"rect-".concat(t.data.period.replace("+",""))})).attr("y",(function(t,e){return A(t.data.period)+E/2})).on("mouseover",(function(t){var e=this;S.transition().duration(200).style("opacity",.9),"2035+"==t.data.period?S.html("\n                    <div class = 'tip-header'><u>".concat(t.data.period,"</u></div>\n                    <div>Utility Cost: $").concat(H(t.data.utility)+"/yr","</div>\n                    <div>Carbon Penalty: $").concat(H(t.data.fine)+"/yr","</div>\n                    <div>Total Cost: $").concat(H(t.data.util_and_fine)+"/yr","</div> \n                    <p class='fine-print'>\n                        <i>\n                            *Penalties for 2035 and up<br/>\n                            are highly variable and will <br/>\n                            likely change. Value shown <br/>\n                            for this period is only an <br/>\n                            estimate.\n                        </i>\n                    </p>\n                    ")):S.html("\n                    <div class = 'tip-header'><u>".concat(t.data.period,"</u></div>\n                    <div>Utility Cost: $").concat(H(t.data.utility)+"/yr","</div>\n                    <div>Carbon Penalty: $").concat(H(t.data.fine)+"/yr","</div>\n                    <div>Total Cost: $").concat(H(t.data.util_and_fine)+"/yr","</div> \n                    ")),S.style("left",(function(){return $.d.pageX-100})).style("top",$.d.pageY-300+"px"),Object($.n)(this).transition().duration(200).style("fill",(function(t,a){return Object($.k)(Object($.n)(e).style("fill")).darker()}))})).on("mouseout",(function(t){S.transition().duration(500).style("opacity",0),Object($.n)(this).transition().duration(200).style("fill",(function(t,e){return u[t.key]}))})).transition().duration(y).attr("x",(function(t){return j(t[0])})).attr("width",(function(t){return j(t[1])-j(t[0])})).attr("height",E);O.selectAll(".x-axis").data([0]).join("g").attr("class","x-axis").attr("transform","translate(".concat(b,", ").concat(h+v,")")),O.selectAll(".y-axis").data([0]).join("g").attr("class","y-axis").attr("transform","translate(".concat(b,", ").concat(v+E/7,")")),O.select(".y-axis").call(w),O.selectAll(".y-axis").selectAll("text").attr("x",-6);O.selectAll(".label").data(s,(function(t){return t.period})).join("text").attr("transform","translate(".concat(b,", ").concat(v,")")).attr("class","label").attr("text-anchor","start").transition().duration(y).attr("x",(function(t){return j(t.util_and_fine)+5})).attr("y",(function(t){return A(t.period)+E+4})).text((function(t){return 0==t.util_and_fine?"":"$"+H(t.util_and_fine)+"/yr"}));var I=O.selectAll(".legend").data([0]).join("g").attr("class","legend").join("g").attr("class","legend").attr("transform","translate(".concat(b,", ").concat(v+h+30,")"));I.selectAll("rect").data(Object.keys(u)).join("rect").attr("x",(function(t,e){return 180*e+5})).attr("y",0).attr("width",15).attr("height",15).style("fill",(function(t,e){return u[t]})).style("opacity",1),I.selectAll("text").data(Object.keys(u)).join("text").attr("x",(function(t,e){return 180*e+30})).attr("y",12).attr("font-size",14).attr("class","legend-text").style("text-anchor","start").style("opacity",1).text((function(t,e){switch(t){case"utility":return"Utility Cost ($)";case"fine":return"Estimated Penalty ($)"}})),O.selectAll(".rect-2035").style("opacity",(function(t,e){if(1==e||0==e)return.35}));var L=I.node().getBoundingClientRect(),B=L.width;L.height;I.attr("transform","translate(".concat(b+(g-B)/2,", ").concat(v+h+30,")")),0==i&&(Object($.n)(I.selectAll("text").nodes()[1]).style("opacity",.5),Object($.n)(I.selectAll("rect").nodes()[1]).style("opacity",.5)),0==l&&(Object($.n)(I.selectAll("text").nodes()[0]).style("opacity",.5),Object($.n)(I.selectAll("rect").nodes()[0]).style("opacity",.5))};return i.a.createElement("div",{className:"bar-container",ref:e})},G=function(t){var e=t.building.summary,a={total_cost:e.total_cost,fine_2024:e.fine_2024,fine_2030:e.fine_2030,fine_2035:e.fine_2035};return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"container-header"},"Estimated Annual Cost Summary"),i.a.createElement(V,{barprops:a}))},z=a(43),W=function(t){var e=Object(r.useRef)(null);Object(r.useEffect)((function(){return n({}),window.addEventListener("resize",a),function(){return window.removeEventListener("resize",a)}}));var a=function(){n({ignoretransition:!0})},n=function(a){var n=e.current,r=t.carbondata,i=r.total_carbon,l=r.co2limit_2024,o=r.co2limit_2030,c=r.co2limit_2035,s=r.fine_2024,u=r.fine_2030,d=r.fine_2035,m=n.getBoundingClientRect(),f=500;a.ignoretransition&&(f=0);var y=m.width-28,p=m.height-0,_=p/6/1.5,v={t:Math.max(.4*p,100),b:35+.025*p,r:100,l:20},b=5,g=20,h=y-v.l-v.r,E=p-v.t-v.b,O=(y-g-20)/3,A=[{thresh:c,fine:d,key:"2035+"},{thresh:o,fine:u,key:"2030-2034"},{thresh:l,fine:s,key:"2024-2029"}],j=Object($.n)(n).selectAll(".tooltip.tooltip-carbon-bar").data([0]).join("div").attr("class","tooltip tooltip-carbon-bar").style("opacity",0),w=Object($.m)().domain([0,Object($.h)([l,i])]).range([0,h]),S=Object($.m)().domain([1,0]).range([-5,_+5]),I=Object($.n)(n).selectAll("svg").data([0]).join("svg").attr("width",y).attr("height",p),L=I.selectAll("g").data([0]).join("g").attr("class","bar-g").attr("width",h).attr("height",E).attr("transform","translate(".concat(v.l,", ").concat(v.t,")")),B=Object($.b)(w).ticks(5).tickSizeOuter(0),N=Object($.c)(S).tickSizeOuter(0),T=I.selectAll(".x-axis").data([0]).join("g").attr("class","x-axis").attr("transform","translate(".concat(v.l,", ").concat(v.b+_+v.t,")")),x=I.selectAll(".y-axis").data([0]).join("g").attr("class","y-axis").attr("transform","translate(".concat(v.l,", ").concat(v.t+_,")")).call(N);I.selectAll(".axis-title").data([0]).join("text").attr("class","axis-title").text((function(){return 0!=i?"Tons CO2 per year":""})).attr("x",v.l+h/2).attr("y",v.b+v.t+_+40+.05*p);var k=I.selectAll(".thresh-main-container").data([0]).join("g").attr("class","thresh-container").attr("transform","translate(".concat(g,", ").concat(b,")"));k.selectAll(".sub-container").data(A).join("g").attr("class",(function(t){return"sub-container ".concat(0==t.fine?"no-fine":"fine")})).each((function(t,e){var a=Object($.n)(this).selectAll("group").data([0]).join("g").attr("transform","translate(".concat(e*O,",0)"));a.selectAll(".rect-container").data([t]).join("rect").attr("class","rect-container").attr("width",270).attr("height",60).attr("rx",8).attr("fill",(function(t){return 0==t.fine?"#999999":"#595954"})),a.selectAll(".year-text").data([0]).join("text").attr("class","carbon-summary-text top-text").attr("x",10).attr("y",20).text(t.key),a.selectAll(".fine-text").data([0]).join("text").attr("class","carbon-summary-text fine-text").attr("x",10).attr("y",35).text("Threshold: ".concat(H(t.thresh)," tCO2e/yr")),a.selectAll(".thresh-text").data([0]).join("text").attr("class","carbon-summary-text thresh-text").attr("x",10).attr("y",50).text("Est. Penalty: $".concat(H(t.fine)+"/yr"));var n=[];a.selectAll("text").nodes().forEach((function(t){n.push(t.getBBox().width)}));var r=Object($.h)(n);a.select(".rect-container").attr("width",(function(){return r+40}))}));L.selectAll("rect").data([i]).join("rect").on("mouseover",(function(t){j.transition().duration(200).style("opacity",.9),j.html("\n                <div>".concat(H(i)," tCO2e/yr</div>\n                ")).style("left",(function(){return $.d.pageX-100})).style("top",$.d.pageY-100+"px"),Object($.n)(this).transition().duration(200).attr("fill",(function(t,e){return Object($.k)("#C4C4C4").darker()}))})).on("mouseout",(function(t){j.transition().duration(500).style("opacity",0),Object($.n)(this).transition().duration(200).attr("fill",(function(t,e){return"#C4C4C4"}))})).transition().duration(f).attr("y",_).attr("height",_).attr("fill","#C4C4C4").attr("x",0).attr("width",(function(t){return w(i)}));var R,D=(R=".rect-container",k.selectAll(R).nodes().map((function(t){return t.getAttribute("width")}))),C=Object(z.a)(D,3),M=C[0],F=C[1],U=C[2];if(A[0].rectwidth=U,A[1].rectwidth=F,A[2].rectwidth=M,p<220)T.call(B),I.selectAll(".axis-title").remove();else{T.call(B);try{I.selectAll(".tick").nodes()[0].remove()}catch(V){}}var P={0:3,1:2,2:1};L.selectAll("polyline").data(A,(function(t){return t.key})).join("polyline").attr("stroke","black").attr("stroke-width","1px").attr("fill","none").transition().duration(f).attr("points",(function(t,e){return t.thresh>2*i||0==t.thresh&&0==i?"":"\n                        ".concat(w(t.thresh),", ").concat(2*_,"\n                        ").concat(w(t.thresh),", ").concat(20-15*P[e],"\n                        ").concat(e*O+t.rectwidth/2,", ").concat(20-15*P[e],"\n                        ").concat(e*O+t.rectwidth/2,", ").concat(-(v.t-b-60),"\n                        ")})),0==i&&(x.remove(),T.remove(),L.remove()),T.selectAll(".domain").remove(),x.selectAll(".tick").remove()};return i.a.createElement("div",{className:"carbon-bar-card",ref:e})},Y=function(t){var e=Object(r.useRef)(null),a=t.building.summary;Object(r.useEffect)((function(){n()}));var n=function(){var t=0;e.current.querySelectorAll(".carbon-summary-text").forEach((function(e){t=Math.max(t,e.getBoundingClientRect().width)})),0!=t&&e.current.querySelectorAll(".carbon-summary-text").forEach((function(e){e.setAttribute("width",t)}))},l={total_carbon:a.total_carbon,total_area:a.total_area,co2limit_2024:a.co2limit_2024,co2limit_2030:a.co2limit_2030,co2limit_2035:a.co2limit_2035,fine_2024:a.fine_2024,fine_2030:a.fine_2030,fine_2035:a.fine_2035};return l.carbon_norm=l.total_carbon/l.total_area,i.a.createElement("div",{className:"carbon-main-container"},i.a.createElement("div",{className:"container-header"},"Estimated Carbon Summary"),i.a.createElement("div",{ref:e,className:"carbon-summary-card"},i.a.createElement("div",{className:"summary-container summary-container-top"},i.a.createElement("div",{className:"carbon-summary-val"},H(l.total_carbon)),i.a.createElement("div",{className:"carbon-summary-text"},"tCO2e/yr")),i.a.createElement("div",{className:"summary-container summary-container-bottom"},i.a.createElement("div",{className:"carbon-summary-val"},H(l.carbon_norm)),i.a.createElement("div",{className:"carbon-summary-text"},"tCO2/sf/yr"))),i.a.createElement(W,{carbondata:l}))},q=function(t){var e=Object(r.useRef)(null);Object(r.useEffect)((function(){return n({}),window.addEventListener("resize",a),function(){return window.removeEventListener("resize",a)}}));var a=function(){n({})},n=function(a){var n=e.current,r=t.donutprops,i=t.title,l=t.tag,o=n.parentElement.parentElement.getBoundingClientRect(),c=(o.width-40)/3,s=o.height-65,u=(Math.max(.01*s,10),Math.max(.05*s,40));var d=c,m=s-0-u,f=Math.max(.05*s,10),y=Math.min(d,m)/2,p={Electricity:"#358FB4",Gas:"#6EB12C",Steam:"#B23232","Fuel Two":"#A644E2","Fuel Four":"#62009E"},_={cost:{val:"$",val_norm:"$/sf/yr"},energy:{val:"kBtu",val_norm:"kBtu/sf/yr"},carbon:{val:"tCO2e",val_norm:"tCO2e/sf/yr"}},v=Object($.j)().value((function(t){return t.val})).sort(null),b=Object($.a)().innerRadius(.7*(y-f)).outerRadius(y-f),g=Object($.n)(n).selectAll("svg").data([0]).join("svg").attr("width",c).attr("height",s),h=g.selectAll("g").data([0]).join("g").attr("transform","translate(".concat(c/2,", ").concat(m/2+0,")")),E=0,O=0;r.forEach((function(t){E+=t.val,O+=t.val_norm}));g.selectAll(".titletext").data([0]).join("text").text(i).attr("class","titletext").attr("x",c/2).attr("y",m/2+0).attr("font-size",14).attr("fill",(function(){return 0!=H(E)?"black":"gray"})).attr("text-anchor","middle").style("font-family","CircularStd-Bold"),g.selectAll(".summarytext").data([E,O]).join("text").text((function(t,e){if(0==H(E))return"";if("cost"==l){if(0==e)return"$".concat(H(t));if(1==e)return"$".concat(H(t||0),"/sf/yr")}else{if(0==e)return"".concat(H(t)," ").concat(_[l].val," ");if(1==e)return"".concat(H(t||0)," ").concat(_[l].val_norm)}})).attr("class","summarytext").attr("x",c/2).attr("y",(function(t,e){return m+0+16*e+10})).attr("fill","black").attr("text-anchor","middle");var A=Object($.n)(n).selectAll(".tooltip.tooltip-donut").data([0]).join("div").attr("class","tooltip tooltip-donut").style("opacity",0),j=h.selectAll("path"),w=Object($.i)().key((function(t){return t})).entries(r).reverse(),S=j.data(),I=v(w[0].values);function L(t){return t.data.utility}function B(t){var e=Object($.f)(this._current,t);return this._current=e(0),function(t){return b(e(t))}}(j=j.data(I,L)).transition().duration(600).attrTween("d",B),j.enter().append("path").each((function(t,e){var a=function(t,e,a,n){var r;if(r=function(t,e,a,n){var r=e.length;for(;--t>=0;)for(var i=n(a[t]),l=0;l<r;++l)if(n(e[l])===i)return e[l]}(t,e,a,n)){var i=Object.assign({},r);return i.startAngle=r.endAngle,i}if(r=function(t,e,a,n){var r=a.length,i=e.length;for(;++t<r;)for(var l=n(a[t]),o=0;o<i;++o)if(n(e[o])===l)return e[o]}(t,e,a,n)){var l=Object.assign({},r);return l.endAngle=r.startAngle,l}return null}(e,S,I,L);a?(this._current=a,this._previous=a):this._current=t})).attr("fill",(function(t,e){return p[t.data.utility]})).on("mouseover",(function(t){A.transition().duration(200).style("opacity",.9),A.html("\n          <span class = 'tip-header'>".concat(t.data.utility,"</span>\n          <br/>\n          ").concat("cost"==l?"$".concat(H(t.data.val)):"".concat(H(t.data.val)," ").concat(_[l].val),"\n          <br/>\n          ").concat("cost"==l?"$".concat(H(t.data.val_norm),"/sf/yr"):"".concat(H(t.data.val_norm)," ").concat(_[l].val_norm),"\n            ")).style("left",(function(){return $.d.pageX-100})).style("top",$.d.pageY-100+"px"),Object($.n)(this).transition().duration(200).style("fill",(function(t,e){return Object($.k)(p[t.data.utility]).darker()}))})).on("mouseout",(function(t){A.transition().duration(500).style("opacity",0),Object($.n)(this).transition().duration(200).style("fill",(function(t,e){return p[t.data.utility]}))})).transition().duration(600).attrTween("d",B),j.exit().transition().duration(600).attrTween("d",(function(t,e){this._previous.data.utility;var a=Object($.g)(t,this._previous);return function(t){return b(a(t))}})).remove()};return i.a.createElement("div",{className:"donut-container",ref:e})},K=function(t){var e=Object(r.useRef)(null),a=t.legendprops;Object(r.useEffect)((function(){return n(),window.addEventListener("resize",n),function(){return window.removeEventListener("resize",n)}}));var n=function(){var t=e.current,n={Electricity:"#358FB4",Gas:"#6EB12C",Steam:"#B23232","Fuel Two":"#A644E2","Fuel Four":"#62009E"},r={Electricity:64,Gas:25,Steam:40,"Fuel Two":56,"Fuel Four":57},i={};a.forEach((function(t){0!=t.val&&(i[t.utility]={color:n[t.utility],textwidth:r[t.utility]})}));var l=t.parentElement.parentElement.getBoundingClientRect(),o=l.width,c=l.height,s=Object($.n)(t).selectAll("svg").data([0]).join("svg");s.attr("width",o).attr("height",c);var u=s.selectAll("g").data([0]).join("g");u.attr("transform","translate(0,10)");var d=u.selectAll("rect").data(Object.keys(i)).join("rect"),m=0;d.attr("fill",(function(t,e){return i[t].color})).attr("x",(function(t,e){var a=m;return m+=i[t].textwidth+35,a})).attr("y",(function(t,e){return 0})).attr("width",15).attr("height",15);var f=u.selectAll("text").data(Object.keys(i)).join("text"),y=0;f.text((function(t){return t})).attr("x",(function(t,e){var a=y;return y+=i[t].textwidth+35,a+22})).attr("y",(function(t,e){return 12})).attr("font-size",14);var p=u.node().getBBox().width;u.attr("transform","translate(".concat((o-p-20)/2,", 10)"))};return i.a.createElement("div",{className:"donut-legend-container",ref:e})},X=function(t){var e=t.building.utilities,a=e.kbtu,n=e.cost,r=e.carbon,l=e.kbtu_sf,o=e.cost_sf,c=e.carbon_sf,s=[{utility:"Electricity",val:n.elec,val_norm:o.elec},{utility:"Gas",val:n.gas,val_norm:o.gas},{utility:"Steam",val:n.steam,val_norm:o.steam},{utility:"Fuel Two",val:n.fuel_two,val_norm:o.fuel_two},{utility:"Fuel Four",val:n.fuel_four,val_norm:o.fuel_four}],u=[{utility:"Electricity",val:a.elec,val_norm:l.elec},{utility:"Gas",val:a.gas,val_norm:l.gas},{utility:"Steam",val:a.steam,val_norm:l.steam},{utility:"Fuel Two",val:a.fuel_two,val_norm:l.fuel_two},{utility:"Fuel Four",val:a.fuel_four,val_norm:l.fuel_four}],d=[{utility:"Electricity",val:r.elec,val_norm:c.elec},{utility:"Gas",val:r.gas,val_norm:c.gas},{utility:"Steam",val:r.steam,val_norm:c.steam},{utility:"Fuel Two",val:r.fuel_two,val_norm:c.fuel_two},{utility:"Fuel Four",val:r.fuel_four,val_norm:c.fuel_four}];return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"container-header"},"Estimated Building Metrics"),i.a.createElement("div",{className:"donuts"},i.a.createElement(q,{title:"Cost",donutprops:s,tag:"cost"}),i.a.createElement(q,{title:"Energy",donutprops:u,tag:"energy"}),i.a.createElement(q,{title:"Carbon",donutprops:d,tag:"carbon"})),i.a.createElement("div",{className:"legend"},i.a.createElement(K,{legendprops:u})))},J=k((function(t){return{building:t.building.compiled}}))((function(t){var e=t.building;return i.a.createElement("div",{className:"content-layout"},i.a.createElement("div",{className:"top-row"},i.a.createElement(Y,{building:e})),i.a.createElement("div",{className:"bottom-row"},i.a.createElement("div",{className:"left-bottom cost-card"},i.a.createElement(G,{building:e})),i.a.createElement("div",{className:"right-bottom donut-card"},i.a.createElement(X,{building:e}))))})),Z=k((function(t){return{isSmallScreen:t.ui.isSmallScreen}}))((function(t){var e=t.isSmallScreen;return i.a.createElement("div",{className:"modal",style:{visibility:e?"visible":"hidden"}},i.a.createElement("div",{className:"modal-content",style:{height:"75vh",width:"75vw"}},i.a.createElement("div",{className:"head-text-1"}," NYC LL97 Carbon Calculator"),i.a.createElement("div",{className:"head-text-2"}," Browser too small to view app."),i.a.createElement("div",{className:"head-text-3",style:{marginLeft:20}},"please view on a larger device, increase window size or decrease browser zoom.")))})),Q=function(t){var e=t.active,a=t.children,n=t.hideCallback,l=function(){n()},o=function(t){"Escape"==t.key&&l()},c=function(t){!t.target.classList.contains("modal-content")&&t.target.classList.contains("modal")&&l()};return Object(r.useEffect)((function(){return window.addEventListener("keydown",o),window.addEventListener("mousedown",c),function(){window.removeEventListener("keydown",o),window.removeEventListener("mousedown",c)}})),i.a.createElement("div",{className:"modal ".concat(e?"active":"inactive")},i.a.createElement("div",{className:"modal-content"},a))},tt={Office:"B (Business)","K-12 School":"E (Educational)",Hotel:"R-1 (Residential)","Worship Facility":"A (Assembly)","Other - Lodging/Residential":"R-1 (Residential)","Distribution Center":"S (Storage)","Non-Refrigerated Warehouse":"S (Storage)","Refrigerated Warehouse":"S (Storage)","Manufacturing/Industrial Plant":"F (Factory/Industrial)","Multifamily Housing":"R-2 (Residential)","Hospital (General Medical & Surgical)*":"I-2 (Institutional)",Other:"A (Assembly)","Other - Education":"A (Assembly)",Museum:"A (Assembly)","Other - Entertainment/Public Assembly":"A (Assembly)","Retail Store":"M (Mercantile)","College/University":"E (Educational)","Food Service":"F (Factory/Industrial)","Residence Hall/Dormitory":"R-1 (Residential)",Laboratory:"I-2 (Institutional)","Medical Office":"B (Business)","Urgent Care/Clinic/Other Outpatient":"B (Healthcare)","Hospital (General Medical & Surgical)":"B (Healthcare)","Ambulatory Surgical Center":"B (Healthcare)","Other - Specialty Hospital":"I-2 (Institutional)","Other - Mall":"B (Business)","Senior Care Community":"I-1 (Institutional)","Pre-school/Daycare":"E (Educational)","Social/Meeting Hall":"A (Assembly)","Performing Arts":"A (Assembly)",Parking:"U (Utility/Misc)","Adult Education":"E (Educational)","Self-Storage Facility":"U (Utility/Misc)","Financial Office":"B (Business)","Strip Mall":"M (Mercantile)","Prison/Incarceration":"I-3 (Institutional)","Fitness Center/Health Club/Gym":"B (Business)","Bank Branch":"B (Business)","Wholesale Club/Supercenter":"M (Mercantile)","Data Center":"B (Business)","Other - Services":"U (Utility/Misc)","Outpatient Rehabilitation/Physical Therapy":"B (Business)",Library:"A (Assembly)","Other - Recreation":"A (Assembly)","Supermarket/Grocery Store":"M (Mercantile)","Convenience Store without Gas Station":"M (Mercantile)","Residential Care Facility":"I-1 (Institutional)","Movie Theater":"A (Assembly)","Enclosed Mall":"A (Assembly)","Automobile Dealership":"B (Business)","Mailing Center/Post Office":"B (Business)","Personal Services (Health/Beauty, Dry Cleaning, etc)":"B (Business)",Courthouse:"A (Assembly)","Other - Technology/Science":"B (Business)","Other - Public Services":"B (Business)","Repair Services (Vehicle, Shoe, Locksmith, etc)":"B (Business)","Fire Station":"B (Business)","Police Station":"B (Business)","Wastewater Treatment Plant":"F (Factory/Industrial)","Veterinary Office":"B (Business)","Ice/Curling Rink":"A (Assembly)",Zoo:"A (Assembly)","Transportation Terminal/Station":"A (Assembly)","Stadium (Open)":"A (Assembly)",Restaurant:"A (Assembly)","Vocational School":"E (Educational)","Other - Restaurant/Bar":"B (Business)","Fast Food Restaurant":"A (Assembly)","Swimming Pool":"A (Assembly)","Bar/Nightclub":"A (Assembly)","Food Sales":"M (Mercantile)","Other - Utility":"U (Utility/Misc)","Bowling Alley":"A (Assembly)","Single Family Home":"A (Assembly)","Convention Center":"A (Assembly)"},et={"A (Assembly)":"A","B (Business)":"B_norm","B (Healthcare)":"B_health","E (Educational)":"E","F (Factory/Industrial)":"F","H (High Hazard)":"H","I-1 (Institutional)":"I1","I-2 (Institutional)":"I2","I-3 (Institutional)":"I3","I-4 (Institutional)":"I4","M (Mercantile)":"M","R-1 (Residential)":"R1","R-2 (Residential)":"R2","S (Storage)":"S","U (Utility/Misc)":"U"},at=function(t){var e=tt[t],a=et[e];return{ll84:t,ll97_long:e||"A (Assembly)",ll97_short:a||"A"}},nt=function(t){var e=t.loadTableData,a=t.handleLoad,n=t.loadInputResponse;if(t.isLoadedError)return i.a.createElement("div",null,"error accessing LL84 database...");var r=e.filter((function(t){return Object.values(t).every((function(t){return void 0!=t}))}));return 0==r.length&&(r=[{}]),i.a.createElement("div",{className:"load-modal-results-table-container"},i.a.createElement("table",{className:"load-modal-results-table"},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("td",null," ",""," "),Object.keys(Object.values(r)[0]).map((function(t,e){return i.a.createElement("td",{style:{width:[300,200,150,150,150,100][e]},key:e},t)})))),i.a.createElement("tbody",null,Object.values(r).map((function(t,e){return i.a.createElement("tr",{key:e},i.a.createElement("td",null,Object.keys(t).length>0?i.a.createElement("div",{className:"select-bldg-btn",onClick:function(){return a(n[e])}},"LOAD"):""),Object.values(t).map((function(t,e){return i.a.createElement("td",{key:e},t)})))})))))},rt=k((function(t){return{loadInputValue:t.ui.loadInputValue,loadInputResponse:t.ui.loadInputResponse,loadTableData:t.ui.loadTableData,loadBldgModalActive:t.ui.loadBldgModalActive,isDemoMode:t.ui.isDemoMode,isLoadMode:t.ui.isLoadMode,isLoadedError:t.ui.isLoadedError}}))((function(t){var e=t.loadInputValue,a=t.loadInputResponse,n=t.loadTableData,l=t.loadBldgModalActive,o=t.isLoadedError,c=Object(r.useRef)(null);Object(r.useEffect)((function(){c.current.focus()}),[l]);var s=function(){t.actions.setLoadBldgModalActive(!1)};return Object(r.useEffect)((function(){if("errorCode"in a)t.actions.setIsLoadedError(!0);else{t.actions.setIsLoadedError(!1);var e=a.map((function(t){return{Name:t.property_name,BBL:t.nyc_borough_block_and_lot,BIN:t.nyc_building_identification,"Property Type 1":t.largest_property_use_type,"Property Type 2":t._2nd_largest_property_use,"Property Type 3":t._3rd_largest_property_use}}));t.actions.setLoadTableData(e)}}),[a,t.actions]),i.a.createElement(Q,{active:l,hideCallback:s},i.a.createElement("div",null,i.a.createElement("div",{className:"head-text-1"},"Building Utility Info Loader",i.a.createElement("button",{className:"modal-exit-btn",onClick:s},"x"))),i.a.createElement("div",{className:"load-modal-body"},i.a.createElement("div",null,i.a.createElement("p",null,"This form allows for querying NYC's \"Energy and Water Data Disclosure for Local Law 84 2020 (Data for Calendar Year 2019)\" database. The form loads and translates building utility information, either using the property's BBL number, address, or property name (searches are case sensitive)."),i.a.createElement("p",null,"Data loaded using this form should be verified with building utility consumption and gross square footage.")),i.a.createElement("div",null,i.a.createElement("span",{className:"head-text-3"},"Input BBL ID Number, Property Name, or Address (case sensitive)")),i.a.createElement("input",{ref:c,className:"bldg-input",value:e,onChange:function(e){t.actions.setLoadInputValue(e.target.value),function(t,e){var a="https://data.cityofnewyork.us/resource/wcm8-aq5w.json?$query= SELECT "+["property_name","property_id","nyc_borough_block_and_lot","nyc_building_identification","largest_property_use_type_1","largest_property_use_type","_2nd_largest_property_use","_2nd_largest_property_use_1","_3rd_largest_property_use","_3rd_largest_property_use_1","fuel_oil_2_use_kbtu","fuel_oil_4_use_kbtu","district_steam_use_kbtu","natural_gas_use_kbtu","electricity_use_grid_purchase"].toString()+" WHERE property_name LIKE '%25"+t+"%25' OR nyc_borough_block_and_lot LIKE '%25"+t+"%25' OR address_1 LIKE '%25"+t+"%25' OR nyc_building_identification LIKE '%25"+t+"%25' LIMIT 8",n=new XMLHttpRequest;n.open("GET",a,!0),n.onreadystatechange=function(t){var r,i=n.response;try{r=JSON.parse(i)}catch(l){r=JSON.parse('"'.concat(i,'"'))}if(""==r)e([{}]);else try{r=r.filter((function(t){return Object.values(t).every((function(t){return void 0!=t}))})),e(r)}catch(o){console.log(a),console.log(r)}},n.send()}(e.target.value,t.actions.setLoadInputResponse)}}),i.a.createElement(nt,{loadTableData:n,handleLoad:function(e){var a=function(t){var e={types:{},utilities:{elec:{cons:0,rate:0},gas:{cons:0,rate:0},steam:{cons:0,rate:0},fuel_two:{cons:0,rate:0},fuel_four:{cons:0,rate:0}}},a=function(t){return Math.round(+t)},n=t.district_steam_use_kbtu,r=t.natural_gas_use_kbtu,i=t.fuel_oil_2_use_kbtu,l=t.fuel_oil_4_use_kbtu,o=a(t.electricity_use_grid_purchase/3.412),c=a(n/1194),s=a(r/100),u=a(i/138),d=a(l/146);e.utilities.elec={cons:+o||0,rate:0},e.utilities.steam={cons:+c||0,rate:0},e.utilities.gas={cons:+s||0,rate:0},e.utilities.fuel_two={cons:+u||0,rate:0},e.utilities.fuel_four={cons:+d||0,rate:0};var m=t.largest_property_use_type,f=t.largest_property_use_type_1,y=t._2nd_largest_property_use,p=t._2nd_largest_property_use_1,_=t._3rd_largest_property_use,v=t._3rd_largest_property_use_1;return e.types={1:{type:at(m).ll97_short,area:a(f),id:1},2:{type:at(y).ll97_short,area:a(p),id:2},3:{type:at(_).ll97_short,area:a(v),id:3}},"Not Available"!==m&&f&&0!=f||delete e.types[1],"Not Available"!==y&&p&&0!=p||delete e.types[2],"Not Available"!==_&&v&&0!=v||delete e.types[3],e}(e);t.actions.setLoadInputSelection(e),t.actions.setIsLoadMode(!0),t.actions.setIsDemoMode(!1),t.actions.setBuilding(a),t.actions.setIsDefaultRates(!0),t.actions.useDefaultRates(),t.actions.setLoadConfirmDialogActive(!0),s()},loadInputResponse:a,isLoadedError:o})))})),it=k((function(t){return{loadConfirmDialogActive:t.ui.loadConfirmDialogActive,loadInputSelection:t.ui.loadInputSelection,loadedBuildingTypes:t.building.loadedBuildingTypes,building:t.building.compiled,inputs:t.building.inputs}}))((function(t){var e=t.loadConfirmDialogActive,a=t.loadInputSelection,n=t.inputs,r=function(){t.actions.setLoadConfirmDialogActive(!1)},l={property_name:"Property Name",property_id:"Property ID",nyc_borough_block_and_lot:"BBL ID (10 digit)",nyc_building_identification:"NYC Building Identification Number (BIN)",largest_property_use_type_1:"Property Type 1 Area",largest_property_use_type:"Property Type 1",_2nd_largest_property_use:"Property Type 2 Area",_2nd_largest_property_use_1:"Property Type 2",_3rd_largest_property_use:"Property Type 3 Area",_3rd_largest_property_use_1:"Property Type 3",fuel_oil_2_use_kbtu:"Fuel Oil Two Use (kBtu)",fuel_oil_4_use_kbtu:"Fuel Oil Four Use (kBtu)",district_steam_use_kbtu:"District Steam Use (kBtu)",natural_gas_use_kbtu:"Natural Gas Use (kBtu)",electricity_use_grid_purchase:"Electricity Purchased From Grid (kBtu)"},o=i.a.createElement("ul",null,Object.keys(a).map((function(t,e){var n=l[t],r=a[t];return"Not Available"!==r&0!==r?i.a.createElement("li",{key:e},n,": ",r):""}))),c=function(){var t=at(a.largest_property_use_type),e=at(a._2nd_largest_property_use),r=at(a._3rd_largest_property_use),i=t.ll84,l=e.ll84,o=r.ll84,c=t.ll97_long,s=e.ll97_long,u=r.ll97_long;return{1:{ll84:i,ll97:c,area:n.types[1]?n.types[1].area:void 0},2:{ll84:l,ll97:s,area:n.types[2]?n.types[2].area:void 0},3:{ll84:o,ll97:u,area:n.types[3]?n.types[3].area:void 0}}}(),s=Object.keys(c).map((function(t,e){var a=c[t].ll84,n=c[t].ll97,r=c[t].area;return void 0===r?"":i.a.createElement("li",{key:e},"LL84 Building Type ",i.a.createElement("u",null,a)," (",r," SF) mapped to"," ",i.a.createElement("u",null,n))}));return i.a.createElement(Q,{active:e,hideCallback:r},i.a.createElement("div",{className:"head-text-1"},"Loaded Building Data Summary for ",a.property_name,i.a.createElement("button",{className:"modal-exit-btn",onClick:r},"x")),i.a.createElement("div",{className:"load-modal-body"},i.a.createElement("div",{className:"head-text-3"},"The following info has been loaded from the NYC LL84 Database. Note that inputs should be verified by the building owner / stakeholder for accuracy."),i.a.createElement("div",{className:"head-text-4"},o),i.a.createElement("div",{className:"head-text-3"},"Because property use types in LL84 do not align with occupancy classes referenced in LL97, an attempt has been made to correlate the loaded building's LL84 property use to the closest LL97 type:"),i.a.createElement("div",{className:"head-text-4"},i.a.createElement("ul",null,s)),i.a.createElement("div",{className:"head-text-3"},'Please verify the above mapping and make any changes necessary to areas and utility consumption in the "Building Inputs" section of the calculator.'),i.a.createElement("div",{className:"ok-dialog-btn-container"},i.a.createElement("button",{style:{height:"42px"},className:"ok-dialog-btn",onClick:r},"OK"))))})),lt=k((function(t){return{utilityRateModalActive:t.ui.utilityRateModalActive}}))((function(t){var e=t.utilityRateModalActive,a=function(){t.actions.setUtilityRateModalActive(!1)};return i.a.createElement(Q,{active:e,hideCallback:a},i.a.createElement("div",null,i.a.createElement("div",{className:"head-text-1"},"Default Utility Rate Information",i.a.createElement("button",{className:"modal-exit-btn",onClick:a},"x"))),i.a.createElement("div",{className:"load-modal-body"},i.a.createElement("div",null,i.a.createElement("p",null,'This calculator provides default NYC utility rates as a convenience for contextualizing LL97 penalties as fractions of overall operating cost. These are "virtual" utility rates, equivalent to the total annual utility cost divided by the total annual consumption (i.e., $/kWh, $/therm, etc) for that fuel source.'),i.a.createElement("p",null,"Actual rates will vary according to individual rate structure, demand charges, and fluctuations in energy cost. The default rates shown below and used in the calculator are reflective of NYC averages for typical commercial buildings."),i.a.createElement("ul",null,i.a.createElement("li",null,"Electricity: $0.22/kWh"),i.a.createElement("li",null,"Natural Gas: $0.997/therm"),i.a.createElement("li",null,"District Steam: $35/MMBtu"),i.a.createElement("li",null,"Fuel Oil #2: $1.65/gal"),i.a.createElement("li",null,"Fuel Oil #4: $1.65/gal")))))})),ot=a(18),ct=a.n(ot),st=function(){var t=function(t,e){var a=window.document.createElement("a");a.href=t,a.download=e,a.style="display:none;",(document.body||document.documentElement).appendChild(a),"function"===typeof a.click?a.click():(a.target="_blank",a.dispatchEvent(new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0}))),URL.revokeObjectURL(a.href),a.remove()};return i.a.createElement("div",{className:"footer"},i.a.createElement("div",{className:"footer-left"},i.a.createElement("p",null,"Download Dynamically Genereated File   "),i.a.createElement("div",null,i.a.createElement("button",{onClick:function(){var e=document.getElementsByTagName("HTML")[0],a=document.getElementsByTagName("BODY")[0],n=e.clientWidth,r=a.clientWidth,i=document.getElementById("main-container"),l=i.scrollWidth-i.clientWidth;l>i.clientWidth&&(n+=l,r+=l),e.style.width=n+"px",a.style.width=r+"px",ct()(i).then((function(t){return t.toDataURL("image/png",1)})).then((function(n){t(n,"exported-vis.png"),e.style.width=null,a.style.width=null}))}},"screenshot"))),i.a.createElement("div",{className:"footer-right"}))},ut=(a(101),a(102),a(103),a(104),a(105),a(106),a(107),a(108),a(109),a(110),a(111),k((function(t){return{dims:t.ui.dims}}))((function(t){var e=t.dims;Object(r.useEffect)((function(){return window.addEventListener("resize",a),function(){return window.removeEventListener("resize",a)}}));var a=function(){t.actions.setDimensions({height:window.innerHeight,width:window.innerWidth})};Object(r.useEffect)((function(){e.width<800||e.height<600?t.actions.setIsSmallScreen(!0):t.actions.setIsSmallScreen(!1)}),[e,t.actions]);return i.a.createElement("div",{id:"main-container"},i.a.createElement(i.a.Fragment,null,i.a.createElement(rt,null),i.a.createElement(it,null),i.a.createElement(lt,null),i.a.createElement(Z,null),i.a.createElement("div",{className:"main-container"},i.a.createElement(P,null),i.a.createElement(J,null),i.a.createElement(st,null))))})));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var dt=a(44),mt={dims:{height:window.innerHeight,width:window.innerWidth},isDemoMode:!1,isLoadMode:!1,infoModalActive:!0,loadBldgModalActive:!1,utilityRateModalActive:!1,loadInputValue:"",loadInputResponse:[{}],loadInputSelection:{},loadTableData:[{}],isSmallScreen:!1,loadConfirmDialogActive:!1,isLoadedError:!1};var ft=function(t){var e={A:[.01074,.0042,.0014],B_health:[.02381,.0133,.0014],B_norm:[.00846,.00453,.0014],E:[.00758,.00344,.0014],F:[.00574,.00167,.0014],H:[.02381,.0133,.0014],I1:[.01138,.00598,.0014],I2:[.02381,.0133,.0014],I3:[.02381,.0133,.0014],I4:[.00758,.00344,.0014],M:[.01181,.00403,.0014],R1:[.00987,.00526,.0014],R2:[.00675,.00407,.0014],S:[.00426,.0011,.0014],U:[.00426,.0011,.0014]},a=0,n=0,r=0,i=0,l=t.types,o=t.utilities;Object.values(l).forEach((function(t){var l=+e[t.type][0]*+t.area,o=+e[t.type][1]*+t.area,c=+e[t.type][2]*+t.area;n+=l,r+=o,i+=c,a+=+t.area}));var c=3.412*+o.elec.cons,s=100*+o.gas.cons,u=1194*+o.steam.cons,d=138*+o.fuel_two.cons,m=146*+o.fuel_four.cons,f=84689e-9*c,y=5311e-8*s,p=4493e-8*u,_=7421e-8*d,v=7529e-8*m,b=+o.elec.cons*+o.elec.rate,g=+o.gas.cons*+o.gas.rate,h=+o.steam.cons*+o.steam.rate,E=+o.fuel_two.cons*+o.fuel_two.rate,O=+o.fuel_four.cons*+o.fuel_four.rate,A=c/a,j=s/a,w=u/a,S=d/a,I=m/a,L=f/a,B=y/a,N=p/a,T=_/a,x=v/a,k=b/a,R=g/a,D=h/a,C=E/a,M=O/a,F=f+y+p+_+v,U=F>n?268*(F-n):0,P=F>r?268*(F-r):0,$=F>i?268*(F-i):0;return a<25e3&&(U=0,P=0,$=0,n=0,r=0,i=0),{summary:{total_carbon:F,total_cost:b+g+h+E+O,total_area:a,co2limit_2024:n,co2limit_2030:r,co2limit_2035:i,fine_2024:U,fine_2030:P,fine_2035:$},utilities:{native:{elec:+o.elec.cons,gas:+o.gas.cons,steam:+o.steam.cons,fuel_two:+o.fuel_two.cons,fuel_four:+o.fuel_four.cons},rates:{elec:+o.elec.rate,gas:+o.gas.rate,steam:+o.steam.rate,fuel_two:+o.fuel_two.rate,fuel_four:+o.fuel_four.rate},kbtu:{elec:c,gas:s,steam:u,fuel_two:d,fuel_four:m},carbon:{elec:f,gas:y,steam:p,fuel_two:_,fuel_four:v},cost:{elec:b,gas:g,steam:h,fuel_two:E,fuel_four:O},cost_sf:{elec:k,gas:R,steam:D,fuel_two:C,fuel_four:M},kbtu_sf:{elec:A,gas:j,steam:w,fuel_two:S,fuel_four:I},carbon_sf:{elec:L,gas:B,steam:N,fuel_two:T,fuel_four:x}}}},yt={inputs:{types:{1:{type:"A",area:"",id:1}},utilities:{elec:{cons:"",rate:""},gas:{cons:"",rate:""},steam:{cons:"",rate:""},fuel_two:{cons:"",rate:""},fuel_four:{cons:"",rate:""}}},compiled:ft({types:{1:{type:"A",area:"",id:1}},utilities:{elec:{cons:"",rate:""},gas:{cons:"",rate:""},steam:{cons:"",rate:""},fuel_two:{cons:"",rate:""},fuel_four:{cons:"",rate:""}}}),isDefaultRates:!1,loadedResponse:{}};var pt=Object(d.c)({ui:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mt,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET_IS_LOADED_ERROR":return Object(s.a)(Object(s.a)({},t),{},{isLoadedError:e.payload});case"SET_LOAD_CONFIRM_DIALOG_ACTIVE":return Object(s.a)(Object(s.a)({},t),{},{loadConfirmDialogActive:e.payload});case"SET_UTILITY_RATE_MODAL_ACTIVE":return Object(s.a)(Object(s.a)({},t),{},{utilityRateModalActive:e.payload});case"SET_IS_SMALL_SCREEN":return Object(s.a)(Object(s.a)({},t),{},{isSmallScreen:e.payload});case"SET_LOAD_TABLE_DATA":return Object(s.a)(Object(s.a)({},t),{},{loadTableData:e.payload});case"SET_LOAD_INPUT_VALUE":return Object(s.a)(Object(s.a)({},t),{},{loadInputValue:e.payload});case"SET_LOAD_INPUT_RESPONSE":return Object(s.a)(Object(s.a)({},t),{},{loadInputResponse:e.payload});case"SET_LOAD_INPUT_SELECTION":return Object(s.a)(Object(s.a)({},t),{},{loadInputSelection:e.payload});case"SET_DIMENSIONS":return Object(s.a)(Object(s.a)({},t),{},{dims:e.payload});case"SET_IS_LOAD_MODE":return Object(s.a)(Object(s.a)({},t),{},{isLoadMode:e.payload});case"SET_IS_DEMO_MODE":return Object(s.a)(Object(s.a)({},t),{},{isDemoMode:e.payload});case"SET_LOAD_MODAL_ACTIVE":return Object(s.a)(Object(s.a)({},t),{},{loadBldgModalActive:e.payload});case"SET_INFO_MODAL_ACTIVE":return Object(s.a)(Object(s.a)({},t),{},{infoModalActive:e.payload});default:return t}},building:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:yt,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET_IS_DEFAULT_RATES":return Object(s.a)(Object(s.a)({},t),{},{isDefaultRates:e.payload});case"USE_DEFAULT_RATES":var a=Object(s.a)({},t.inputs);a.utilities.elec.rate="0.22",a.utilities.gas.rate="0.997",a.utilities.steam.rate="35",a.utilities.fuel_two.rate="1.65",a.utilities.fuel_four.rate="1.65";var n=ft(a);return Object(s.a)(Object(s.a)({},t),{},{inputs:a,compiled:n});case"USE_NULL_RATES":var r=Object(s.a)({},t.inputs);r.utilities.elec.rate="",r.utilities.gas.rate="",r.utilities.steam.rate="",r.utilities.fuel_two.rate="",r.utilities.fuel_four.rate="";var i=ft(r);return Object(s.a)(Object(s.a)({},t),{},{inputs:r,compiled:i});case"SET_BUILDING":return Object(s.a)(Object(s.a)({},t),{},{inputs:e.payload,compiled:ft(e.payload)});case"SET_DEMO_BUILDING":return Object(s.a)(Object(s.a)({},t),{},{inputs:{types:{1:{type:"B_norm",area:5e4,id:1},2:{type:"A",area:3e3,id:2}},utilities:{elec:{cons:75e4,rate:.193},gas:{cons:1e4,rate:1.001},steam:{cons:250,rate:32.8},fuel_two:{cons:500,rate:1.43},fuel_four:{cons:0,rate:1.43}}},compiled:ft({types:{1:{type:"B_norm",area:5e4,id:1},2:{type:"A",area:3e3,id:2}},utilities:{elec:{cons:75e4,rate:.193},gas:{cons:1e4,rate:1.001},steam:{cons:250,rate:32.8},fuel_two:{cons:500,rate:1.43},fuel_four:{cons:0,rate:1.43}}})});case"SET_DEFAULT_BUILDING":return Object(s.a)({},yt);default:return t}}}),_t=a(12),vt=Object(dt.a)({reducer:pt,middleware:[_t.a]});a(112);a.d(e,"store",(function(){return vt})),Object.values||(Object.values=function(t){return Object.keys(t).map((function(e){return t[e]}))}),window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=function(t,e){e=e||window;for(var a=0;a<this.length;a++)t.call(e,this[a],a,this)}),Array.prototype.map||(Array.prototype.map=function(t){var e,a,n;if(null==this)throw new TypeError("this is null or not defined");var r=Object(this),i=r.length>>>0;if("function"!==typeof t)throw new TypeError(t+" is not a function");for(arguments.length>1&&(e=arguments[1]),a=new Array(i),n=0;n<i;){var l,o;n in r&&(l=r[n],o=t.call(e,l,n,r),a[n]=o),n++}return a}),o.a.render(i.a.createElement(i.a.Fragment,null,i.a.createElement(u.a,{store:vt},i.a.createElement(ut,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))},93:function(t,e,a){t.exports=a(113)}},[[93,1,2]]]);
//# sourceMappingURL=main.f67ad0b6.chunk.js.map